package test

import (
	"fmt"
	"testing"

	"github.com/karosown/katool-go/util/markdown"
)

func Test_HTML(t *testing.T) {
	html := markdown.ToHtml(test_md)
	fmt.Println(html)
}

func Test_TREE(t *testing.T) {
	tree := markdown.ToTree(test_md)
	fmt.Println(tree)
}
func Test_MARKDOWN(t *testing.T) {
	tree := markdown.ToTree(test_md)
	toMarkdown := tree.ToMarkdown()
	fmt.Println(toMarkdown)
}
func Test_TREE2HTML(t *testing.T) {
	tree := markdown.ToTree(test_md)
	html := tree.ToHtml()
	fmt.Println(html)
}

const test_md = "# Katool-Go\n\n<div align=\"center\">\n\n<img src=\"logo.png\" alt=\"Katool-Go Logo\" width=\"400\">\n\n<h1>ğŸ› ï¸ Katool-Go</h1>\n\n<p>\n  <a href=\"https://pkg.go.dev/github.com/karosown/katool-go\"><img src=\"https://pkg.go.dev/badge/github.com/karosown/katool-go.svg\" alt=\"Go Reference\"></a>\n  <a href=\"https://goreportcard.com/report/github.com/karosown/katool-go\"><img src=\"https://goreportcard.com/badge/github.com/karosown/katool-go\" alt=\"Go Report Card\"></a>\n  <a href=\"https://github.com/karosown/katool-go/releases\"><img src=\"https://img.shields.io/github/v/release/karosown/katool-go\" alt=\"GitHub release\"></a>\n  <a href=\"https://github.com/karosown/katool-go/blob/main/LICENSE\"><img src=\"https://img.shields.io/github/license/karosown/katool-go\" alt=\"License\"></a>\n  <a href=\"https://golang.org/dl/\"><img src=\"https://img.shields.io/github/go-mod/go-version/karosown/katool-go\" alt=\"Go Version\"></a>\n</p>\n\n<b><i>ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ Go å·¥å…·åº“ï¼Œå€Ÿé‰´ Java ç”Ÿæ€ä¼˜ç§€è®¾è®¡ï¼Œä¸º Go å¼€å‘æä¾›å…¨æ–¹ä½æ”¯æŒ</i></b>\n\n<p>\n  <a href=\"README.md\">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</a> |\n  <a href=\"README_EN.md\">ğŸ‡ºğŸ‡¸ English</a>\n</p>\n\n</div>\n\n<hr>\n\n## ğŸ“‹ ç›®å½•\n\n- [ğŸ“ ç®€ä»‹](#ç®€ä»‹)\n- [âœ¨ ç‰¹æ€§](#ç‰¹æ€§)\n- [ğŸ“¦ å®‰è£…](#å®‰è£…)\n- [ğŸš€ å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)\n- [ğŸ”§ æ ¸å¿ƒæ¨¡å—](#æ ¸å¿ƒæ¨¡å—)\n  - [ğŸ“š å®¹å™¨ä¸é›†åˆ](#å®¹å™¨ä¸é›†åˆ)\n    - [Optional å¯é€‰å€¼å®¹å™¨](#optional-å¯é€‰å€¼å®¹å™¨)\n  - [ğŸŒŠ æµå¼å¤„ç†](#æµå¼å¤„ç†)\n  - [ğŸ”„ æ•°æ®è½¬æ¢](#æ•°æ®è½¬æ¢)\n  - [ğŸ’‰ ä¾èµ–æ³¨å…¥](#ä¾èµ–æ³¨å…¥)\n  - [ğŸ”’ å¹¶å‘æ§åˆ¶](#å¹¶å‘æ§åˆ¶)\n  - [ğŸ•¸ï¸ Webçˆ¬è™«](#webçˆ¬è™«)\n  - [ğŸ“ æ–‡ä»¶æ“ä½œ](#æ–‡ä»¶æ“ä½œ)\n  - [ğŸ’¾ æ•°æ®åº“æ”¯æŒ](#æ•°æ®åº“æ”¯æŒ)\n  - [ğŸŒ ç½‘ç»œé€šä¿¡](#ç½‘ç»œé€šä¿¡)\n  - [ğŸ“ æ—¥å¿—ç³»ç»Ÿ](#æ—¥å¿—ç³»ç»Ÿ)\n  - [âš™ï¸ ç®—æ³•å·¥å…·](#ç®—æ³•å·¥å…·)\n  - [ğŸ”¤ æ–‡æœ¬å¤„ç†](#æ–‡æœ¬å¤„ç†)\n  - [âš¡ è§„åˆ™å¼•æ“](#è§„åˆ™å¼•æ“)\n  - [ğŸ§° è¾…åŠ©å·¥å…·](#è¾…åŠ©å·¥å…·)\n- [ğŸ’¡ æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)\n- [ğŸ‘¥ è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)\n- [ğŸ“„ è®¸å¯è¯](#è®¸å¯è¯)\n\n<hr>\n\n## ğŸ“ ç®€ä»‹\n\n**Katool-Go** æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ Go è¯­è¨€ç»¼åˆå·¥å…·åº“ï¼Œä¸“ä¸ºæé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡è€Œè®¾è®¡ã€‚å®ƒå€Ÿé‰´äº† Java ç”Ÿæ€ç³»ç»Ÿä¸­çš„æˆç†Ÿè®¾è®¡æ¨¡å¼ï¼ŒåŒæ—¶å……åˆ†åˆ©ç”¨ Go è¯­è¨€çš„ç°ä»£ç‰¹æ€§ï¼Œå¦‚æ³›å‹ã€åç¨‹ç­‰ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€å¥—å®Œæ•´çš„å·¥å…·è§£å†³æ–¹æ¡ˆã€‚\n\næœ¬åº“é‡‡ç”¨**æ¨¡å—åŒ–ã€ç±»å‹å®‰å…¨ã€é«˜æ€§èƒ½**çš„è®¾è®¡ç†å¿µï¼Œé€‚ç”¨äºå„ç§è§„æ¨¡çš„ Go é¡¹ç›®ï¼Œä»å¾®æœåŠ¡åˆ°å¤§å‹ä¼ä¸šåº”ç”¨ï¼Œéƒ½èƒ½æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚\n\n### ğŸ¯ è®¾è®¡ç›®æ ‡\n\n- **ç±»å‹å®‰å…¨**ï¼šå……åˆ†åˆ©ç”¨ Go 1.18+ æ³›å‹ç‰¹æ€§ï¼Œæä¾›ç±»å‹å®‰å…¨çš„ API\n- **æ€§èƒ½ä¼˜å¼‚**ï¼šå†…ç½®å¹¶å‘ä¼˜åŒ–ï¼Œå……åˆ†å‘æŒ¥ Go è¯­è¨€æ€§èƒ½ä¼˜åŠ¿\n- **æ˜“äºä½¿ç”¨**ï¼šæä¾›ç±»ä¼¼ Java Stream API çš„é“¾å¼æ“ä½œï¼Œé™ä½å­¦ä¹ æˆæœ¬\n- **ç”Ÿäº§å°±ç»ª**ï¼šå®Œæ•´çš„é”™è¯¯å¤„ç†ã€æ—¥å¿—ç³»ç»Ÿå’Œæµ‹è¯•è¦†ç›–\n\n<hr>\n\n## âœ¨ ç‰¹æ€§\n\nKatool-Go æä¾›ä»¥ä¸‹æ ¸å¿ƒç‰¹æ€§ï¼š\n\n<table>\n  <tr>\n    <td><b>ğŸŒŠ æµå¼å¤„ç†</b></td>\n    <td>ç±»ä¼¼ Java 8 Stream API çš„é“¾å¼æ“ä½œï¼Œæ”¯æŒå¹¶è¡Œå¤„ç†ã€map/filter/reduce/collect ç­‰å®Œæ•´æ“ä½œé›†</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ“š å®¹å™¨ä¸é›†åˆ</b></td>\n    <td>å¢å¼ºçš„é›†åˆç±»å‹ï¼šMapã€SafeMapã€SortedMapã€HashBasedMapã€Optional ç­‰ï¼Œå…¨éƒ¨æ”¯æŒæ³›å‹</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ’‰ ä¾èµ–æ³¨å…¥</b></td>\n    <td>è½»é‡çº§ IOC å®¹å™¨ï¼Œæ”¯æŒç»„ä»¶æ³¨å†Œã€è·å–å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œç®€åŒ–ä¾èµ–ç®¡ç†</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ”’ å¹¶å‘æ§åˆ¶</b></td>\n    <td>LockSupportï¼ˆç±»ä¼¼Javaçš„park/unparkï¼‰ã€åŒæ­¥é”å°è£…ç­‰åç¨‹æ§åˆ¶å·¥å…·</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ”„ æ•°æ®è½¬æ¢</b></td>\n    <td>ç»“æ„ä½“å±æ€§å¤åˆ¶ã€ç±»å‹è½¬æ¢ã€æ–‡ä»¶å¯¼å‡ºï¼ˆCSV/JSONï¼‰ã€åºåˆ—åŒ–ç­‰å…¨æ–¹ä½æ•°æ®å¤„ç†</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ•¸ï¸ Webçˆ¬è™«</b></td>\n    <td>æ™ºèƒ½å†…å®¹æå–ã€Chromeæ¸²æŸ“æ”¯æŒã€RSSè®¢é˜…è§£æç­‰å®Œæ•´çˆ¬è™«è§£å†³æ–¹æ¡ˆ</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ“ æ–‡ä»¶æ“ä½œ</b></td>\n    <td>æ–‡ä»¶ä¸‹è½½å™¨ã€åºåˆ—åŒ–å·¥å…·ã€è·¯å¾„å¤„ç†ç­‰æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ’¾ æ•°æ®åº“æ”¯æŒ</b></td>\n    <td>MongoDB å¢å¼ºå·¥å…·ã€åˆ†é¡µæŸ¥è¯¢å™¨ç­‰æ•°æ®åº“æ“ä½œç®€åŒ–</td>\n  </tr>\n  <tr>\n    <td><b>ğŸŒ ç½‘ç»œé€šä¿¡</b></td>\n    <td>ç°ä»£åŒ– HTTP å®¢æˆ·ç«¯ã€OAuth2 æ”¯æŒã€SSE å®æ—¶é€šä¿¡ã€RESTful API å°è£…</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ“ æ—¥å¿—ç³»ç»Ÿ</b></td>\n    <td>ç»“æ„åŒ–æ—¥å¿—ã€é“¾å¼æ„å»ºã€å¤šçº§åˆ«è¾“å‡ºã€è‡ªå®šä¹‰æ ¼å¼åŒ–ç­‰å®Œæ•´æ—¥å¿—æ–¹æ¡ˆ</td>\n  </tr>\n  <tr>\n    <td><b>âš™ï¸ ç®—æ³•å·¥å…·</b></td>\n    <td>æœ‰åºæ•°ç»„åˆå¹¶ã€å¤šç§å“ˆå¸Œè®¡ç®—ã€æ•°æ®ç»“æ„ç®—æ³•ç­‰å®ç”¨ç®—æ³•é›†</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ”¤ æ–‡æœ¬å¤„ç†</b></td>\n    <td>ä¸­æ–‡åˆ†è¯ï¼ˆjiebaï¼‰ã€è¯é¢‘ç»Ÿè®¡ã€æ–‡æœ¬åˆ†æã€è¯­è¨€æ£€æµ‹ç­‰NLPå·¥å…·</td>\n  </tr>\n  <tr>\n    <td><b>âš¡ è§„åˆ™å¼•æ“</b></td>\n    <td>çµæ´»çš„ä¸šåŠ¡è§„åˆ™å¤„ç†ã€è§„åˆ™é“¾æ„å»ºã€ä¸­é—´ä»¶æ”¯æŒç­‰ä¼ä¸šçº§è§„åˆ™ç®¡ç†</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ§° è¾…åŠ©å·¥å…·</b></td>\n    <td>æ—¥æœŸå¤„ç†ã€éšæœºæ•°ç”Ÿæˆã€è°ƒè¯•å·¥å…·ã€ç³»ç»Ÿå·¥å…·ç­‰å¼€å‘è¾…åŠ©åŠŸèƒ½</td>\n  </tr>\n</table>\n\n<hr>\n\n## ğŸ“¦ å®‰è£…\n\nä½¿ç”¨ `go get` å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼š\n\n```bash\ngo get -u github.com/karosown/katool-go\n```\n\n> âš ï¸ **ç³»ç»Ÿè¦æ±‚**\n> - Go ç‰ˆæœ¬ >= 1.23.1\n> - æ”¯æŒæ³›å‹ç‰¹æ€§\n> - æ¨èä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ä»¥è·å¾—æœ€ä½³æ€§èƒ½\n\n<hr>\n\n## ğŸš€ å¿«é€Ÿå¼€å§‹\n\nä¸‹é¢æ˜¯å‡ ä¸ªæ ¸å¿ƒåŠŸèƒ½çš„å¿«é€Ÿç¤ºä¾‹ï¼Œå±•ç¤º Katool-Go çš„å¼ºå¤§èƒ½åŠ›ï¼š\n\n<details open>\n<summary><b>ğŸŒŠ æµå¼å¤„ç† - Javaé£æ ¼çš„é“¾å¼æ“ä½œ</b></summary>\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"github.com/karosown/katool-go/container/stream\"\n\t\"github.com/karosown/katool-go/algorithm\"\n)\n\n// å®šä¹‰ç”¨æˆ·ç»“æ„\ntype User struct {\n\tName  string `json:\"name\"`\n\tAge   int    `json:\"age\"`\n\tSex   int    `json:\"sex\"`    // 0-å¥³æ€§ï¼Œ1-ç”·æ€§\n\tMoney int    `json:\"money\"`\n\tClass string `json:\"class\"`\n\tId    int    `json:\"id\"`\n}\n\nfunc main() {\n\tusers := []User{\n\t\t{Name: \"Alice\", Age: 25, Sex: 1, Money: 1000, Class: \"A\", Id: 1},\n\t\t{Name: \"Bob\", Age: 30, Sex: 0, Money: 1500, Class: \"B\", Id: 2},\n\t\t{Name: \"Charlie\", Age: 35, Sex: 0, Money: 2000, Class: \"A\", Id: 3},\n\t\t{Name: \"David\", Age: 40, Sex: 1, Money: 2500, Class: \"B\", Id: 4},\n\t}\n\t\n\t// åˆ›å»ºå¹¶è¡Œæµ\n\tuserStream := stream.ToStream(&users).Parallel()\n\t\n\t// é“¾å¼æ“ä½œï¼šè¿‡æ»¤ -> æ’åº -> ç»Ÿè®¡\n\tadultUsers := userStream.\n\t\tFilter(func(u User) bool { \n\t\t\treturn u.Age >= 30 \n\t\t}).\n\t\tSort(func(a, b User) bool { \n\t\t\treturn a.Money > b.Money  // æŒ‰æ”¶å…¥é™åº\n\t\t}).\n\t\tToList()\n\t\n\tfmt.Printf(\"30å²ä»¥ä¸Šç”¨æˆ·ï¼ˆæŒ‰æ”¶å…¥æ’åºï¼‰: %+v\\n\", adultUsers)\n\t\n\t// èšåˆè®¡ç®—ï¼šæ€»æ”¶å…¥\n\ttotalMoney := userStream.Reduce(int64(0), \n\t\tfunc(sum any, u User) any { \n\t\t\treturn sum.(int64) + int64(u.Money) \n\t\t}, \n\t\tfunc(sum1, sum2 any) any {\n\t\t\treturn sum1.(int64) + sum2.(int64)\n\t\t})\n\tfmt.Printf(\"æ€»æ”¶å…¥: %d\\n\", totalMoney)\n\t\n\t// åˆ†ç»„ç»Ÿè®¡ï¼šæŒ‰ç­çº§åˆ†ç»„\n\tgroups := stream.ToStream(&users).GroupBy(func(u User) any {\n\t\treturn u.Class\n\t})\n\t\n\tfor class, members := range groups {\n\t\tfmt.Printf(\"ç­çº§ %s: %däºº\\n\", class, len(members))\n\t}\n\t\n\t// å»é‡æ“ä½œï¼ˆåŸºäºJSONåºåˆ—åŒ–ï¼‰\n\tuniqueUsers := userStream.DistinctBy(algorithm.HASH_WITH_JSON_MD5).ToList()\n\tfmt.Printf(\"å»é‡åç”¨æˆ·æ•°: %d\\n\", len(uniqueUsers))\n\t\n\t// è½¬æ¢ä¸ºæ˜ å°„\n\tuserMap := stream.ToStream(&users).ToMap(\n\t\tfunc(index int, u User) any { return u.Id },\n\t\tfunc(index int, u User) any { return u.Name },\n\t)\n\tfmt.Printf(\"ç”¨æˆ·ID->å§“åæ˜ å°„: %+v\\n\", userMap)\n}\n```\n</details>\n\n<details>\n<summary><b>ğŸ“š å¢å¼ºé›†åˆ - ç±»å‹å®‰å…¨çš„å®¹å™¨</b></summary>\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"encoding/json\"\n\t\"github.com/karosown/katool-go/container/xmap\"\n\t\"github.com/karosown/katool-go/container/optional\"\n)\n\nfunc main() {\n\t// 1. åŸºç¡€Map - æ³›å‹æ”¯æŒ\n\tuserMap := xmap.NewMap[string, User]()\n\tuserMap.Set(\"alice\", User{Name: \"Alice\", Age: 25})\n\tuserMap.Set(\"bob\", User{Name: \"Bob\", Age: 30})\n\t\n\tif user, exists := userMap.Get(\"alice\"); exists {\n\t\tfmt.Printf(\"æ‰¾åˆ°ç”¨æˆ·: %+v\\n\", user)\n\t}\n\t\n\t// 2. çº¿ç¨‹å®‰å…¨Map - å¹¶å‘åœºæ™¯\n\tsafeMap := xmap.NewSafeMap[string, int]()\n\t\n\t// åŸå­æ“ä½œï¼šè·å–æˆ–å­˜å‚¨\n\tvalue, loaded := safeMap.LoadOrStore(\"counter\", 1)\n\tfmt.Printf(\"è®¡æ•°å™¨å€¼: %d, æ˜¯å¦å·²å­˜åœ¨: %v\\n\", value, loaded)\n\t\n\t// åŸå­æ“ä½œï¼šè·å–å¹¶åˆ é™¤\n\tvalue, exists := safeMap.LoadAndDelete(\"counter\")\n\tfmt.Printf(\"åˆ é™¤çš„å€¼: %d, æ˜¯å¦å­˜åœ¨: %v\\n\", value, exists)\n\t\n\t// 3. æœ‰åºMap - æŒ‰é”®æ’åºï¼Œæ”¯æŒJSONåºåˆ—åŒ–\n\tsortedMap := xmap.NewSortedMap[string, string]()\n\tsortedMap.Set(\"3\", \"three\")\n\tsortedMap.Set(\"1\", \"one\")\n\tsortedMap.Set(\"2\", \"two\")\n\t\n\tjsonBytes, _ := json.Marshal(sortedMap) \n\tfmt.Printf(\"æœ‰åºJSON: %s\\n\", string(jsonBytes))  // æŒ‰é”®æ’åºè¾“å‡º\n\t\n\t// 4. åŒå±‚é”®æ˜ å°„\n\tdbMap := xmap.NewHashBasedMap[string, int, User]()\n\tdbMap.Set(\"users\", 1, User{Name: \"Alice\", Age: 25})\n\tdbMap.Set(\"users\", 2, User{Name: \"Bob\", Age: 30})\n\tdbMap.Set(\"admins\", 1, User{Name: \"Admin\", Age: 40})\n\t\n\tif user, exists := dbMap.Get(\"users\", 1); exists {\n\t\tfmt.Printf(\"ç”¨æˆ·è¡¨ä¸­ID=1çš„ç”¨æˆ·: %+v\\n\", user)\n\t}\n\t\n\t// 5. Optional - é¿å…ç©ºæŒ‡é’ˆ\n\topt := optional.Of(\"Hello World\")\n\topt.IfPresent(func(s string) {\n\t\tfmt.Printf(\"Optionalå€¼: %s\\n\", s)\n\t})\n\t\n\temptyOpt := optional.Empty[string]()\n\tdefaultValue := emptyOpt.OrElse(\"é»˜è®¤å€¼\")\n\tfmt.Printf(\"ç©ºOptionalçš„é»˜è®¤å€¼: %s\\n\", defaultValue)\n}\n```\n</details>\n\n<details>\n<summary><b>ğŸ”’ å¹¶å‘æ§åˆ¶ - åç¨‹åŒæ­¥</b></summary>\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"time\"\n\t\"sync\"\n\t\"github.com/karosown/katool-go/lock\"\n\t\"github.com/karosown/katool-go/container/stream\"\n)\n\nfunc main() {\n\t// 1. LockSupport - ç±»ä¼¼Javaçš„park/unpark\n\tfmt.Println(\"=== LockSupport ç¤ºä¾‹ ===\")\n\tls := lock.NewLockSupport()\n\t\n\tgo func() {\n\t\tfmt.Println(\"å­åç¨‹ï¼šå‡†å¤‡é˜»å¡ç­‰å¾…...\")\n\t\tls.Park()  // é˜»å¡ç›´åˆ°è¢«å”¤é†’\n\t\tfmt.Println(\"å­åç¨‹ï¼šè¢«æˆåŠŸå”¤é†’ï¼\")\n\t}()\n\t\n\ttime.Sleep(time.Second)\n\tfmt.Println(\"ä¸»åç¨‹ï¼šå‘é€å”¤é†’ä¿¡å·\")\n\tls.Unpark()  // å”¤é†’é˜»å¡çš„åç¨‹\n\t\n\ttime.Sleep(100 * time.Millisecond)  // ç­‰å¾…è¾“å‡º\n\t\n\t// 2. æ‰¹é‡åç¨‹ç®¡ç†\n\tfmt.Println(\"\\n=== æ‰¹é‡åç¨‹ç®¡ç† ===\")\n\tsupports := make([]*lock.LockSupport, 5)\n\tfor i := 0; i < 5; i++ {\n\t\tsupports[i] = lock.NewLockSupport()\n\t\tidx := i\n\t\tgo func() {\n\t\t\tfmt.Printf(\"åç¨‹ %d: ç­‰å¾…å”¤é†’\\n\", idx)\n\t\t\tsupports[idx].Park()\n\t\t\tfmt.Printf(\"åç¨‹ %d: è¢«å”¤é†’\\n\", idx)\n\t\t}()\n\t}\n\t\n\ttime.Sleep(500 * time.Millisecond)\n\t\n\t// ä½¿ç”¨æµå¼APIæ‰¹é‡å”¤é†’\n\tstream.ToStream(&supports).ForEach(func(ls *lock.LockSupport) {\n\t\tls.Unpark()\n\t\ttime.Sleep(100 * time.Millisecond)  // ä¾æ¬¡å”¤é†’\n\t})\n\t\n\t// 3. åŒæ­¥ä»£ç å—\n\tfmt.Println(\"\\n=== åŒæ­¥ä»£ç å— ===\")\n\tvar counter int\n\tvar mutex sync.Mutex\n\t\n\t// ä¼ ç»Ÿæ–¹å¼ vs å°è£…æ–¹å¼\n\tlock.Synchronized(&mutex, func() {\n\t\tcounter++\n\t\tfmt.Printf(\"åŒæ­¥å—ä¸­çš„è®¡æ•°å™¨: %d\\n\", counter)\n\t})\n\t\n\t// å¸¦è¿”å›å€¼çš„åŒæ­¥\n\tresult := lock.SynchronizedT(&mutex, func() string {\n\t\treturn fmt.Sprintf(\"æœ€ç»ˆè®¡æ•°: %d\", counter)\n\t})\n\tfmt.Println(result)\n\t\n\ttime.Sleep(100 * time.Millisecond)\n}\n```\n</details>\n\n<details>\n<summary><b>ğŸ”„ æ•°æ®è½¬æ¢ - å…¨æ–¹ä½æ•°æ®å¤„ç†</b></summary>\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"github.com/karosown/katool-go/convert\"\n)\n\n// æºç»“æ„ä½“\ntype UserEntity struct {\n\tID       int    `json:\"id\"`\n\tName     string `json:\"name\"`\n\tAge      int    `json:\"age\"`\n\tEmail    string `json:\"email\"`\n\tCreateAt string `json:\"create_at\"`\n}\n\n// ç›®æ ‡DTO\ntype UserDTO struct {\n\tID       int    `json:\"id\"`\n\tName     string `json:\"name\"`\n\tAge      int    `json:\"age\"`\n\tEmail    string `json:\"email\"`\n\tStatus   string `json:\"status\"`  // æ–°å¢å­—æ®µ\n}\n\nfunc main() {\n\tusers := []UserEntity{\n\t\t{ID: 1, Name: \"Alice\", Age: 25, Email: \"alice@example.com\", CreateAt: \"2024-01-01\"},\n\t\t{ID: 2, Name: \"Bob\", Age: 30, Email: \"bob@example.com\", CreateAt: \"2024-01-02\"},\n\t\t{ID: 3, Name: \"Charlie\", Age: 35, Email: \"charlie@example.com\", CreateAt: \"2024-01-03\"},\n\t}\n\t\n\t// 1. å±æ€§å¤åˆ¶ï¼ˆåŒåå­—æ®µè‡ªåŠ¨å¤åˆ¶ï¼‰\n\tfmt.Println(\"=== å±æ€§å¤åˆ¶ ===\")\n\tsourceUser := users[0]\n\ttargetDTO := &UserDTO{Status: \"Active\"}  // é¢„è®¾æ–°å­—æ®µ\n\t\n\tresult, err := convert.CopyProperties(sourceUser, targetDTO)\n\tif err == nil {\n\t\tfmt.Printf(\"å¤åˆ¶ç»“æœ: %+v\\n\", result)\n\t}\n\t\n\t// 2. æ‰¹é‡è½¬æ¢\n\tfmt.Println(\"\\n=== æ‰¹é‡è½¬æ¢ ===\")\n\tdtos := convert.Convert(users, func(user UserEntity) UserDTO {\n\t\treturn UserDTO{\n\t\t\tID:     user.ID,\n\t\t\tName:   user.Name,\n\t\t\tAge:    user.Age,\n\t\t\tEmail:  user.Email,\n\t\t\tStatus: \"Active\",\n\t\t}\n\t})\n\tfmt.Printf(\"è½¬æ¢åçš„DTOåˆ—è¡¨: %+v\\n\", dtos)\n\t\n\t// 3. ç±»å‹è½¬æ¢\n\tfmt.Println(\"\\n=== ç±»å‹è½¬æ¢ ===\")\n\tfmt.Printf(\"æ•´æ•°è½¬å­—ç¬¦ä¸²: %s\\n\", convert.ToString(123))\n\tfmt.Printf(\"å¸ƒå°”è½¬å­—ç¬¦ä¸²: %s\\n\", convert.ToString(true))\n\tfmt.Printf(\"åˆ‡ç‰‡è½¬å­—ç¬¦ä¸²: %s\\n\", convert.ToString([]int{1, 2, 3}))\n\t\n\t// 4. ç±»å‹æ“¦é™¤å’Œæ¢å¤\n\tfmt.Println(\"\\n=== ç±»å‹æ“¦é™¤å’Œæ¢å¤ ===\")\n\tanySlice := convert.ToAnySlice(users)\n\tfmt.Printf(\"ç±»å‹æ“¦é™¤åé•¿åº¦: %d\\n\", len(anySlice))\n\t\n\trecoveredUsers := convert.FromAnySlice[UserEntity](anySlice)\n\tfmt.Printf(\"æ¢å¤ç±»å‹åç¬¬ä¸€ä¸ªç”¨æˆ·: %+v\\n\", recoveredUsers[0])\n\t\n\t// 5. æ–‡ä»¶å¯¼å‡º\n\tfmt.Println(\"\\n=== æ–‡ä»¶å¯¼å‡º ===\")\n\t// å¯¼å‡ºä¸ºJSONæ–‡ä»¶\n\terr = convert.StructToJsonFile(users, \"users.json\")\n\tif err == nil {\n\t\tfmt.Println(\"æˆåŠŸå¯¼å‡ºJSONæ–‡ä»¶: users.json\")\n\t}\n\t\n\t// å¯¼å‡ºä¸ºCSVæ–‡ä»¶ï¼ˆéœ€è¦csvæ ‡ç­¾ï¼‰\n\ttype UserCSV struct {\n\t\tID   int    `csv:\"ç”¨æˆ·ID\"`\n\t\tName string `csv:\"å§“å\"`\n\t\tAge  int    `csv:\"å¹´é¾„\"`\n\t}\n\t\n\tcsvUsers := convert.Convert(users, func(u UserEntity) UserCSV {\n\t\treturn UserCSV{ID: u.ID, Name: u.Name, Age: u.Age}\n\t})\n\t\n\terr = convert.StructToCSV(csvUsers, \"users.csv\")\n\tif err == nil {\n\t\tfmt.Println(\"æˆåŠŸå¯¼å‡ºCSVæ–‡ä»¶: users.csv\")\n\t}\n}\n```\n</details>\n\n<details>\n<summary><b>ğŸ“š Optional å®¹å™¨ - å®‰å…¨å¤„ç†ç©ºå€¼</b></summary>\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"strings\"\n\t\"github.com/karosown/katool-go/container/optional\"\n)\n\nfunc main() {\n\t// 1. åŸºç¡€ç”¨æ³•ï¼šå®‰å…¨å¤„ç†å¯èƒ½ä¸ºç©ºçš„å€¼\n\tfmt.Println(\"=== Optional åŸºç¡€ç”¨æ³• ===\")\n\t\n\t// åˆ›å»ºåŒ…å«å€¼çš„Optional\n\tnameOpt := optional.Of(\"å¼ ä¸‰\")\n\tnameOpt.IfPresent(func(name string) {\n\t\tfmt.Printf(\"ç”¨æˆ·å: %s\\n\", name)\n\t})\n\t\n\t// å¤„ç†ç©ºå€¼æƒ…å†µ\n\temptyOpt := optional.Empty[string]()\n\tusername := emptyOpt.OrElse(\"åŒ¿åç”¨æˆ·\")\n\tfmt.Printf(\"ç”¨æˆ·åï¼ˆå¸¦é»˜è®¤å€¼ï¼‰: %s\\n\", username)\n\t\n\t// 2. å‡½æ•°å¼é“¾å¼æ“ä½œ\n\tfmt.Println(\"\\n=== é“¾å¼æ“ä½œ ===\")\n\t\n\t// ç”¨æˆ·è¾“å…¥å¤„ç†é“¾\n\tuserInput := \"  HELLO WORLD  \"\n\tprocessedInput := optional.MapTyped(optional.Of(userInput), strings.TrimSpace).\n\t\tFilter(func(s string) bool { return len(s) > 0 }).         // è¿‡æ»¤ç©ºå­—ç¬¦ä¸²\n\t\tMap(func(s any) any { return strings.ToLower(s.(string)) }). // è½¬å°å†™\n\t\tOrElse(\"æ— æ•ˆè¾“å…¥\")\n\t\n\tfmt.Printf(\"å¤„ç†åçš„è¾“å…¥: %s\\n\", processedInput)\n\t\n\t// 3. å­—ç¬¦ä¸²ä¸“ç”¨å¤„ç†\n\tfmt.Println(\"\\n=== å­—ç¬¦ä¸²ä¸“ç”¨å¤„ç† ===\")\n\t\n\t// StringOptional é“¾å¼å¤„ç†\n\tresult := optional.NewStringOptional(\"  hello world  \").\n\t\tTrimSpace().                    // å»é™¤ç©ºæ ¼\n\t\tFilterNonEmpty().              // è¿‡æ»¤ç©ºå­—ç¬¦ä¸²\n\t\tOrElse(\"ç©ºå­—ç¬¦ä¸²\")\n\t\n\tfmt.Printf(\"å­—ç¬¦ä¸²å¤„ç†ç»“æœ: %s\\n\", result)\n\t\n\t// 4. é…ç½®å€¼å¤„ç†\n\tfmt.Println(\"\\n=== é…ç½®å€¼å¤„ç† ===\")\n\t\n\t// æ¨¡æ‹Ÿä»ç¯å¢ƒå˜é‡è·å–é…ç½®\n\tgetConfig := func(key string) optional.Optional[string] {\n\t\tconfigs := map[string]string{\n\t\t\t\"database_url\": \"postgres://localhost:5432/mydb\",\n\t\t\t\"redis_url\":    \"\",  // ç©ºå€¼\n\t\t}\n\t\treturn optional.OfNullable(configs[key])\n\t}\n\t\n\t// è·å–æ•°æ®åº“é…ç½®ï¼Œå¸¦é»˜è®¤å€¼\n\tdbUrl := getConfig(\"database_url\").OrElse(\"sqlite://memory\")\n\tfmt.Printf(\"æ•°æ®åº“URL: %s\\n\", dbUrl)\n\t\n\t// è·å–Redisé…ç½®ï¼Œç©ºå€¼å¤„ç†\n\tredisUrl := getConfig(\"redis_url\").OrElse(\"redis://localhost:6379\")\n\tfmt.Printf(\"Redis URL: %s\\n\", redisUrl)\n\t\n\t// 5. ç”¨æˆ·éªŒè¯é“¾\n\tfmt.Println(\"\\n=== ç”¨æˆ·éªŒè¯é“¾ ===\")\n\t\n\ttype User struct {\n\t\tName  string\n\t\tAge   int\n\t\tEmail string\n\t}\n\t\n\tvalidateUser := func(user User) optional.Optional[User] {\n\t\treturn optional.Of(user).\n\t\t\tFilter(func(u User) bool { return u.Name != \"\" }).        // éªŒè¯å§“å\n\t\t\tFilter(func(u User) bool { return u.Age >= 18 }).         // éªŒè¯å¹´é¾„\n\t\t\tFilter(func(u User) bool { return strings.Contains(u.Email, \"@\") }) // éªŒè¯é‚®ç®±\n\t}\n\t\n\t// æµ‹è¯•æœ‰æ•ˆç”¨æˆ·\n\tvalidUser := User{Name: \"å¼ ä¸‰\", Age: 25, Email: \"zhangsan@example.com\"}\n\tresult1 := validateUser(validUser)\n\tresult1.IfPresentOrElse(\n\t\tfunc(u User) { fmt.Printf(\"éªŒè¯é€šè¿‡: %+v\\n\", u) },\n\t\tfunc() { fmt.Println(\"éªŒè¯å¤±è´¥\") },\n\t)\n\t\n\t// æµ‹è¯•æ— æ•ˆç”¨æˆ·\n\tinvalidUser := User{Name: \"\", Age: 16, Email: \"invalid-email\"}\n\tresult2 := validateUser(invalidUser)\n\tresult2.IfPresentOrElse(\n\t\tfunc(u User) { fmt.Printf(\"éªŒè¯é€šè¿‡: %+v\\n\", u) },\n\t\tfunc() { fmt.Println(\"éªŒè¯å¤±è´¥\") },\n\t)\n\t\n\t// 6. æ¡ä»¶å·¥å…·å‡½æ•°\n\tfmt.Println(\"\\n=== æ¡ä»¶å·¥å…·å‡½æ•° ===\")\n\t\n\tisVIP := true\n\tuserType := optional.IsTrue(isVIP, \"VIPç”¨æˆ·\", \"æ™®é€šç”¨æˆ·\")\n\tfmt.Printf(\"ç”¨æˆ·ç±»å‹: %s\\n\", userType)\n\t\n\t// æ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒå‡½æ•°\n\tmessage := optional.IsTrueByFunc(isVIP,\n\t\tfunc() string { return \"æ¬¢è¿VIPç”¨æˆ·ï¼Œäº«å—ä¸“å±æœåŠ¡ï¼\" },\n\t\tfunc() string { return \"æ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„æœåŠ¡ï¼\" },\n\t)\n\tfmt.Printf(\"æ¬¢è¿æ¶ˆæ¯: %s\\n\", message)\n}\n```\n</details>\n\n<details>\n<summary><b>âš¡ è§„åˆ™å¼•æ“ - çµæ´»çš„ä¸šåŠ¡é€»è¾‘</b></summary>\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"time\"\n\t\"github.com/karosown/katool-go/ruleengine\"\n)\n\ntype User struct {\n\tID       int       `json:\"id\"`\n\tName     string    `json:\"name\"`\n\tAge      int       `json:\"age\"`\n\tEmail    string    `json:\"email\"`\n\tVIPLevel int       `json:\"vip_level\"`\n\tBalance  float64   `json:\"balance\"`\n\tIDCard   string    `json:\"id_card\"`\n\tCreatedAt time.Time `json:\"created_at\"`\n}\n\nfunc main() {\n\t// 1. åˆ›å»ºè§„åˆ™å¼•æ“\n\tfmt.Println(\"=== è§„åˆ™å¼•æ“åŸºç¡€ç”¨æ³• ===\")\n\t\n\tengine := ruleengine.NewRuleEngine[User]()\n\t\n\t// 2. æ³¨å†ŒéªŒè¯è§„åˆ™\n\tengine.RegisterRule(\"validate_basic_info\",\n\t\tfunc(user User, _ any) bool { return true },\n\t\tfunc(user User, _ any) (User, any, error) {\n\t\t\tif user.Name == \"\" {\n\t\t\t\treturn user, \"ç”¨æˆ·åä¸èƒ½ä¸ºç©º\", ruleengine.EOF\n\t\t\t}\n\t\t\tif len(user.Name) < 2 {\n\t\t\t\treturn user, \"ç”¨æˆ·åå¤ªçŸ­\", ruleengine.EOF\n\t\t\t}\n\t\t\treturn user, \"åŸºç¡€ä¿¡æ¯éªŒè¯é€šè¿‡\", nil\n\t\t},\n\t)\n\t\n\t// 3. å¹´é¾„æ£€æŸ¥è§„åˆ™ï¼ˆå«æµç¨‹æ§åˆ¶ï¼‰\n\tengine.RegisterRule(\"check_age\",\n\t\tfunc(user User, _ any) bool { return true },\n\t\tfunc(user User, _ any) (User, any, error) {\n\t\t\tif user.Age < 13 {\n\t\t\t\treturn user, \"ç”¨æˆ·å¹´é¾„è¿‡å°\", ruleengine.EOF // ç«‹å³ç»ˆæ­¢\n\t\t\t} else if user.Age < 18 {\n\t\t\t\treturn user, \"æœªæˆå¹´ç”¨æˆ·\", ruleengine.FALLTHROUGH // è·³è¿‡æˆå¹´ç”¨æˆ·é€»è¾‘\n\t\t\t}\n\t\t\treturn user, \"æˆå¹´ç”¨æˆ·\", nil\n\t\t},\n\t)\n\t\n\t// 4. æˆå¹´ç”¨æˆ·èº«ä»½éªŒè¯ï¼ˆæœªæˆå¹´ç”¨æˆ·ä¼šè·³è¿‡ï¼‰\n\tengine.RegisterRule(\"adult_identity_check\",\n\t\tfunc(user User, _ any) bool { return user.Age >= 18 },\n\t\tfunc(user User, _ any) (User, any, error) {\n\t\t\tif user.IDCard == \"\" {\n\t\t\t\treturn user, \"æˆå¹´ç”¨æˆ·éœ€è¦èº«ä»½è¯\", ruleengine.EOF\n\t\t\t}\n\t\t\treturn user, \"èº«ä»½éªŒè¯å®Œæˆ\", nil\n\t\t},\n\t)\n\t\n\t// 5. VIPç‰¹æƒæ£€æŸ¥\n\tengine.RegisterRule(\"vip_privilege_check\",\n\t\tfunc(user User, _ any) bool { return user.VIPLevel > 0 },\n\t\tfunc(user User, _ any) (User, any, error) {\n\t\t\tif user.VIPLevel >= 3 {\n\t\t\t\tuser.Balance += 100.0  // VIP3ä»¥ä¸Šèµ é€ä½™é¢\n\t\t\t\treturn user, \"VIPç‰¹æƒå·²æ¿€æ´»\", nil\n\t\t\t} else if user.VIPLevel >= 1 {\n\t\t\t\tuser.Balance += 50.0   // VIP1-2èµ é€éƒ¨åˆ†ä½™é¢\n\t\t\t\treturn user, \"VIPç¦åˆ©å·²å‘æ”¾\", nil\n\t\t\t}\n\t\t\treturn user, \"æ™®é€šç”¨æˆ·\", nil\n\t\t},\n\t)\n\t\n\t// 6. æœ€ç»ˆæ³¨å†Œ\n\tengine.RegisterRule(\"complete_registration\",\n\t\tfunc(user User, _ any) bool { return true },\n\t\tfunc(user User, _ any) (User, any, error) {\n\t\t\tif user.ID == 0 {\n\t\t\t\tuser.ID = int(time.Now().Unix()) // ç”ŸæˆID\n\t\t\t}\n\t\t\tuser.CreatedAt = time.Now()\n\t\t\treturn user, \"æ³¨å†Œå®Œæˆ\", nil\n\t\t},\n\t)\n\t\n\t// 7. æ·»åŠ æ—¥å¿—ä¸­é—´ä»¶\n\tengine.AddMiddleware(func(data User, next func(User) (User, any, error)) (User, any, error) {\n\t\tfmt.Printf(\"  â†’ å¤„ç†ç”¨æˆ·: %s (å¹´é¾„: %d)\\n\", data.Name, data.Age)\n\t\tresult, info, err := next(data)\n\t\tif err == ruleengine.EOF {\n\t\t\tfmt.Printf(\"  âœ– æµç¨‹ç»ˆæ­¢: %v\\n\", info)\n\t\t} else if err == ruleengine.FALLTHROUGH {\n\t\t\tfmt.Printf(\"  âš¡ è§„åˆ™è·³è¿‡: %v\\n\", info)\n\t\t} else if err == nil {\n\t\t\tfmt.Printf(\"  âœ“ æ‰§è¡ŒæˆåŠŸ: %v\\n\", info)\n\t\t} else {\n\t\t\tfmt.Printf(\"  âœ— æ‰§è¡Œå¤±è´¥: %v\\n\", err)\n\t\t}\n\t\treturn result, info, err\n\t})\n\t\n\t// 8. æ„å»ºæ³¨å†Œæµç¨‹é“¾\n\t_, err := engine.NewBuilder(\"user_registration\").\n\t\tAddRule(\"validate_basic_info\").\n\t\tAddRule(\"check_age\").\n\t\tAddRule(\"adult_identity_check\").\n\t\tAddRule(\"vip_privilege_check\").\n\t\tAddRule(\"complete_registration\").\n\t\tBuild()\n\t\n\tif err != nil {\n\t\tfmt.Printf(\"æ„å»ºè§„åˆ™é“¾å¤±è´¥: %v\\n\", err)\n\t\treturn\n\t}\n\t\n\t// 9. æµ‹è¯•ä¸åŒåœºæ™¯\n\tfmt.Println(\"\\n=== æµ‹è¯•åœºæ™¯ 1: æ­£å¸¸æˆå¹´VIPç”¨æˆ· ===\")\n\tadultVIP := User{\n\t\tName:     \"å¼ ä¸‰\",\n\t\tAge:      25,\n\t\tEmail:    \"zhangsan@example.com\",\n\t\tVIPLevel: 3,\n\t\tIDCard:   \"123456789012345678\",\n\t\tBalance:  0,\n\t}\n\tresult1 := engine.Execute(\"user_registration\", adultVIP)\n\tfmt.Printf(\"æœ€ç»ˆç»“æœ: ID=%d, ä½™é¢=%.2f\\n\", result1.Data.ID, result1.Data.Balance)\n\t\n\tfmt.Println(\"\\n=== æµ‹è¯•åœºæ™¯ 2: æœªæˆå¹´ç”¨æˆ·ï¼ˆè·³è¿‡èº«ä»½éªŒè¯ï¼‰===\")\n\tminor := User{\n\t\tName:     \"æå››\",\n\t\tAge:      16,\n\t\tEmail:    \"lisi@example.com\",\n\t\tVIPLevel: 1,\n\t\tBalance:  0,\n\t}\n\tresult2 := engine.Execute(\"user_registration\", minor)\n\tfmt.Printf(\"æœ€ç»ˆç»“æœ: ID=%d, ä½™é¢=%.2f\\n\", result2.Data.ID, result2.Data.Balance)\n\t\n\tfmt.Println(\"\\n=== æµ‹è¯•åœºæ™¯ 3: å¹´é¾„è¿‡å°ï¼ˆç«‹å³ç»ˆæ­¢ï¼‰===\")\n\tchild := User{\n\t\tName:     \"ç‹äº”\",\n\t\tAge:      10,\n\t\tEmail:    \"wangwu@example.com\",\n\t\tVIPLevel: 0,\n\t\tBalance:  0,\n\t}\n\tresult3 := engine.Execute(\"user_registration\", child)\n\tif result3.Error != nil {\n\t\tfmt.Printf(\"æ³¨å†Œå¤±è´¥: %v\\n\", result3.Error)\n\t}\n\t\n\tfmt.Println(\"\\n=== æµ‹è¯•åœºæ™¯ 4: æ‰¹é‡å¤„ç†å¤šä¸ªç”¨æˆ· ===\")\n\tusers := []User{\n\t\t{Name: \"ç”¨æˆ·A\", Age: 25, VIPLevel: 2, IDCard: \"111111111111111111\"},\n\t\t{Name: \"ç”¨æˆ·B\", Age: 17, VIPLevel: 1},\n\t\t{Name: \"\", Age: 30, VIPLevel: 0},  // æ— æ•ˆç”¨æˆ·å\n\t}\n\t\n\tfor i, user := range users {\n\t\tfmt.Printf(\"\\n--- å¤„ç†ç”¨æˆ· %d ---\\n\", i+1)\n\t\tresult := engine.Execute(\"user_registration\", user)\n\t\tif result.Error != nil && result.Error != ruleengine.EOF && result.Error != ruleengine.FALLTHROUGH {\n\t\t\tfmt.Printf(\"å¤„ç†å¤±è´¥: %v\\n\", result.Error)\n\t\t} else {\n\t\t\tfmt.Printf(\"å¤„ç†å®Œæˆ: ID=%d\\n\", result.Data.ID)\n\t\t}\n\t}\n}\n```\n</details>\n\n<hr>\n\n## ğŸ”§ æ ¸å¿ƒæ¨¡å—\n\n### ğŸ“š å®¹å™¨ä¸é›†åˆ\n\nKatool-Go æä¾›äº†ä¸°å¯Œçš„å®¹å™¨å’Œé›†åˆç±»å‹ï¼Œå…¨éƒ¨æ”¯æŒæ³›å‹ï¼Œæä¾›ç±»å‹å®‰å…¨çš„æ“ä½œã€‚\n\n#### Optional å¯é€‰å€¼å®¹å™¨\n\nOptional æ˜¯ä¸€ä¸ªç”¨äºå®‰å…¨å¤„ç†å¯èƒ½ä¸ºç©ºå€¼çš„å®¹å™¨ç±»å‹ï¼Œçµæ„Ÿæ¥è‡ª Java çš„ Optional ç±»ï¼Œæä¾›ç±»å‹å®‰å…¨çš„ç©ºå€¼å¤„ç†æœºåˆ¶ã€‚\n\n##### ğŸš€ åŸºç¡€ç”¨æ³•\n\n```go\nimport \"github.com/karosown/katool-go/container/optional\"\n\n// åˆ›å»ºåŒ…å«å€¼çš„Optional\nopt := optional.Of(\"Hello World\")\n\n// åˆ›å»ºç©ºçš„Optional\nemptyOpt := optional.Empty[string]()\n\n// æ ¹æ®å€¼æ˜¯å¦ä¸ºé›¶å€¼åˆ›å»ºOptional\nnullableOpt := optional.OfNullable(\"\")  // ç©ºå­—ç¬¦ä¸²ä¼šåˆ›å»ºç©ºOptional\n```\n\n##### ğŸ” å®‰å…¨æ£€æŸ¥å’Œè·å–\n\n```go\n// å®‰å…¨æ£€æŸ¥å’Œè·å–\nif opt.IsPresent() {\n    value := opt.Get()\n    fmt.Println(\"å€¼å­˜åœ¨:\", value)\n}\n\n// æ£€æŸ¥æ˜¯å¦ä¸ºç©º\nif emptyOpt.IsEmpty() {\n    fmt.Println(\"Optionalä¸ºç©º\")\n}\n\n// æä¾›é»˜è®¤å€¼çš„å‡ ç§æ–¹å¼\ndefaultValue := emptyOpt.OrElse(\"é»˜è®¤å€¼\")\nlazyDefault := emptyOpt.OrElseGet(func() string {\n    return \"å»¶è¿Ÿè®¡ç®—çš„é»˜è®¤å€¼\"\n})\nsafeValue := opt.OrElsePanic(\"Optionalä¸èƒ½ä¸ºç©º!\")\n```\n\n##### âš¡ å‡½æ•°å¼æ“ä½œ\n\n```go\n// æ¡ä»¶æ‰§è¡Œ - æœ‰å€¼æ—¶æ‰§è¡Œ\nopt.IfPresent(func(v string) {\n    fmt.Println(\"å¤„ç†å€¼:\", v)\n})\n\n// åŒåˆ†æ”¯æ‰§è¡Œ - æœ‰å€¼æ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œæ— å€¼æ‰§è¡Œç¬¬äºŒä¸ª\nopt.IfPresentOrElse(\n    func(v string) { fmt.Println(\"æœ‰å€¼:\", v) },\n    func() { fmt.Println(\"æ— å€¼\") },\n)\n\n// è¿‡æ»¤æ“ä½œ\nfiltered := opt.Filter(func(s string) bool {\n    return len(s) > 5\n})\n\n// ç±»å‹å®‰å…¨çš„æ˜ å°„ï¼ˆæ¨èï¼‰\nresult := optional.MapTyped(optional.Of(\"  hello  \"), strings.TrimSpace).\n    Filter(func(s string) bool { return len(s) > 0 }).\n    OrElse(\"ç©ºå­—ç¬¦ä¸²\")\n```\n\n##### ğŸ”¤ å­—ç¬¦ä¸²å¤„ç†ä¸“ç”¨\n\nä¸ºäº†æ›´å¥½åœ°æ”¯æŒå­—ç¬¦ä¸²å¤„ç†ï¼Œæä¾›äº†ä¸“ç”¨çš„ StringOptionalï¼š\n\n```go\n// ä¸“ç”¨çš„StringOptionalè¿›è¡Œé“¾å¼å­—ç¬¦ä¸²å¤„ç†\nresult := optional.NewStringOptional(\"  hello  \").\n    TrimSpace().                    // å»é™¤ç©ºæ ¼\n    FilterNonEmpty().              // è¿‡æ»¤ç©ºå­—ç¬¦ä¸²\n    OrElse(\"ç©ºå­—ç¬¦ä¸²\")             // æä¾›é»˜è®¤å€¼\n\nfmt.Println(\"å¤„ç†ç»“æœ:\", result) // è¾“å‡º: å¤„ç†ç»“æœ: hello\n```\n\n##### ğŸ› ï¸ å®ç”¨å·¥å…·å‡½æ•°\n\n```go\n// æ ¹æ®æ¡ä»¶è¿”å›ä¸åŒçš„å€¼\nenabled := optional.IsTrue(condition, \"å¯ç”¨\", \"ç¦ç”¨\")\n\n// æ ¹æ®æ¡ä»¶è°ƒç”¨ä¸åŒçš„å‡½æ•°\nresult := optional.IsTrueByFunc(condition, \n    func() string { return \"åŠŸèƒ½å·²å¯ç”¨\" },\n    func() string { return \"åŠŸèƒ½å·²ç¦ç”¨\" },\n)\n\n// æ ¹æ®å‡½æ•°æ¡ä»¶è°ƒç”¨ä¸åŒçš„å‡½æ•°\nresult := optional.FuncIsTrueByFunc(\n    func() bool { return someComplexCondition() },\n    enabledFunc,\n    disabledFunc,\n)\n```\n\n##### ğŸ“ å®ç”¨ç¤ºä¾‹\n\n**ç”¨æˆ·è¾“å…¥å¤„ç†**\n```go\nfunc processUserInput(input string) string {\n    return optional.MapTyped(optional.Of(input), strings.TrimSpace).\n        Filter(func(s string) bool { return len(s) > 0 }).\n        Map(func(s any) any { return strings.ToLower(s.(string)) }).\n        OrElse(\"æ— æ•ˆè¾“å…¥\").(string)\n}\n```\n\n**é…ç½®å€¼å¤„ç†**\n```go\nfunc getConfig(key string) optional.Optional[string] {\n    if value := os.Getenv(key); value != \"\" {\n        return optional.Of(value)\n    }\n    return optional.Empty[string]()\n}\n\n// ä½¿ç”¨\ndbUrl := getConfig(\"DATABASE_URL\").OrElse(\"sqlite://default.db\")\n```\n\n**ç”¨æˆ·éªŒè¯é“¾å¼å¤„ç†**\n```go\nfunc validateUser(user User) optional.Optional[User] {\n    return optional.Of(user).\n        Filter(func(u User) bool { return u.Name != \"\" }).\n        Filter(func(u User) bool { return u.Age >= 18 }).\n        Filter(func(u User) bool { return u.Email != \"\" })\n}\n\n// ä½¿ç”¨\nvalidUser := validateUser(user).OrElsePanic(\"ç”¨æˆ·éªŒè¯å¤±è´¥\")\n```\n\n##### ğŸ“‹ API å‚è€ƒ\n\n**æ ¸å¿ƒæ–¹æ³•ï¼š**\n- `Of[T](value T)` - åˆ›å»ºåŒ…å«å€¼çš„Optional\n- `Empty[T]()` - åˆ›å»ºç©ºOptional\n- `OfNullable[T](value T)` - æ ¹æ®é›¶å€¼åˆ›å»ºOptional\n\n**æ£€æŸ¥æ–¹æ³•ï¼š**\n- `IsPresent()` - æ£€æŸ¥æ˜¯å¦æœ‰å€¼\n- `IsEmpty()` - æ£€æŸ¥æ˜¯å¦ä¸ºç©º\n\n**è·å–æ–¹æ³•ï¼š**\n- `Get()` - è·å–å€¼ï¼ˆç©ºæ—¶panicï¼‰\n- `OrElse(T)` - æä¾›é»˜è®¤å€¼\n- `OrElseGet(func() T)` - å»¶è¿Ÿè®¡ç®—é»˜è®¤å€¼\n- `OrElsePanic(string)` - ç©ºæ—¶panicå¹¶æ˜¾ç¤ºæ¶ˆæ¯\n\n**å‡½æ•°å¼æ–¹æ³•ï¼š**\n- `IfPresent(func(T))` - æ¡ä»¶æ‰§è¡Œ\n- `IfPresentOrElse(func(T), func())` - åŒåˆ†æ”¯æ‰§è¡Œ\n- `Filter(func(T) bool)` - è¿‡æ»¤\n- `Map(func(T) any)` - æ˜ å°„ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\n- `MapTyped[T,R](Optional[T], func(T) R)` - ç±»å‹å®‰å…¨æ˜ å°„\n\n##### âš ï¸ æ³¨æ„äº‹é¡¹\n\n1. **ç±»å‹å®‰å…¨**: ä½¿ç”¨ `MapTyped` è¿›è¡Œç±»å‹å®‰å…¨çš„æ˜ å°„æ“ä½œ\n2. **é“¾å¼è°ƒç”¨**: å®ä¾‹æ–¹æ³•æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œä½†è¦æ³¨æ„ç±»å‹è½¬æ¢\n3. **æ€§èƒ½**: Optional ä¼šå¸¦æ¥è½»å¾®çš„æ€§èƒ½å¼€é”€ï¼Œåœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸­è°¨æ…ä½¿ç”¨\n4. **ç©ºæŒ‡é’ˆ**: Optional æœ¬èº«ä¸ä¼šä¸º nilï¼Œä½†å†…éƒ¨å€¼å¯èƒ½æ˜¯é›¶å€¼\n\n### ğŸŒŠ æµå¼å¤„ç†\n\næä¾›ç±»ä¼¼ Java 8 Stream API çš„å¼ºå¤§æµå¼å¤„ç†èƒ½åŠ›ï¼Œæ”¯æŒå¹¶è¡Œè®¡ç®—å’Œé“¾å¼æ“ä½œã€‚\n\n```go\nimport \"github.com/karosown/katool-go/container/stream\"\n\n// å¹¶è¡Œæµå¤„ç†\nresults := stream.ToStream(&data).\n    Parallel().                               // å¯ç”¨å¹¶è¡Œå¤„ç†\n    Filter(func(item Item) bool { return item.IsValid() }).\n    Map(func(item Item) ProcessedItem { return item.Process() }).\n    Sort(func(a, b ProcessedItem) bool { return a.Priority > b.Priority }).\n    ToList()\n```\n\n### ğŸ”„ æ•°æ®è½¬æ¢\n\nå¼ºå¤§çš„æ•°æ®è½¬æ¢å’Œç»“æ„ä½“å¤„ç†èƒ½åŠ›ã€‚\n\n```go\nimport \"github.com/karosown/katool-go/convert\"\n\n// ç»“æ„ä½“å¤åˆ¶\nvar dest DestStruct\nconvert.CopyStruct(&dest, &source)\n\n// æ•°æ®å¯¼å‡º\nconvert.ExportToCSV(data, \"output.csv\")\nconvert.ExportToJSON(data, \"output.json\")\n```\n\n### ğŸ’‰ ä¾èµ–æ³¨å…¥\n\nè½»é‡çº§IOCå®¹å™¨ï¼Œç®€åŒ–ä¾èµ–ç®¡ç†ã€‚\n\n```go\nimport \"github.com/karosown/katool-go/container/ioc\"\n\n// æ³¨å†ŒæœåŠ¡\ncontainer := ioc.NewContainer()\ncontainer.Register(\"userService\", &UserService{})\n\n// è·å–æœåŠ¡\nuserSvc := container.Get(\"userService\").(*UserService)\n```\n\n### ğŸ”’ å¹¶å‘æ§åˆ¶\n\næä¾›ç±»ä¼¼Javaçš„å¹¶å‘æ§åˆ¶å·¥å…·ã€‚\n\n```go\nimport \"github.com/karosown/katool-go/lock\"\n\n// LockSupport ç±»ä¼¼Javaçš„park/unpark\nlock.LockSupport.Park()        // é˜»å¡å½“å‰åç¨‹\nlock.LockSupport.Unpark(goroutineId) // å”¤é†’æŒ‡å®šåç¨‹\n```\n\n### ğŸ•¸ï¸ Webçˆ¬è™«\n\næ™ºèƒ½å†…å®¹æå–å’Œç½‘é¡µçˆ¬å–å·¥å…·ã€‚\n\n```go\nimport \"github.com/karosown/katool-go/web_crawler\"\n\n// å†…å®¹æå–\nextractor := web_crawler.NewContentExtractor()\ncontent := extractor.ExtractFromURL(\"https://example.com\")\n\n// Chromeæ¸²æŸ“æ”¯æŒ\nrenderer := web_crawler.NewChromeRenderer()\nhtml := renderer.RenderPage(\"https://spa-app.com\")\n```\n\n### ğŸ“ æ–‡ä»¶æ“ä½œ\n\nå®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œå·¥å…·ã€‚\n\n```go\nimport \"github.com/karosown/katool-go/file\"\n\n// æ–‡ä»¶ä¸‹è½½\ndownloader := file.NewDownloader()\ndownloader.Download(\"https://example.com/file.zip\", \"./downloads/\")\n\n// åºåˆ—åŒ–æ“ä½œ\nfile.SerializeToFile(data, \"data.json\")\ndata := file.DeserializeFromFile[MyStruct](\"data.json\")\n```\n\n### ğŸ’¾ æ•°æ®åº“æ”¯æŒ\n\nMongoDBç­‰æ•°æ®åº“æ“ä½œå¢å¼ºã€‚\n\n```go\nimport \"github.com/karosown/katool-go/db\"\n\n// MongoDBåˆ†é¡µæŸ¥è¯¢\npaginator := db.NewMongoPaginator(collection)\nresult := paginator.Page(1).Size(20).Find(filter)\n```\n\n### ğŸŒ ç½‘ç»œé€šä¿¡\n\nç°ä»£åŒ–HTTPå®¢æˆ·ç«¯å’Œç½‘ç»œå·¥å…·ã€‚\n\n```go\nimport \"github.com/karosown/katool-go/net/http/remote\"\n\n// é“¾å¼HTTPè¯·æ±‚æ„å»º\nvar result APIResponse\nresp, err := remote.NewRemoteRequest(\"https://api.example.com\").\n    Headers(map[string]string{\"Authorization\": \"Bearer \" + token}).\n    QueryParam(map[string]string{\"page\": \"1\"}).\n    Method(\"GET\").\n    Url(\"/api/data\").\n    Build(&result)\n```\n\n### ğŸ“ æ—¥å¿—ç³»ç»Ÿ\n\nç»“æ„åŒ–æ—¥å¿—å’Œé“¾å¼æ„å»ºã€‚\n\n```go\nimport \"github.com/karosown/katool-go/xlog\"\n\n// ç»“æ„åŒ–æ—¥å¿—\nlogger := xlog.NewLogger().\n    WithField(\"service\", \"user-api\").\n    WithField(\"version\", \"1.0.0\")\n\nlogger.Info(\"ç”¨æˆ·ç™»å½•æˆåŠŸ\").\n    WithField(\"userId\", userId).\n    WithField(\"ip\", clientIP).\n    Log()\n```\n\n### âš™ï¸ ç®—æ³•å·¥å…·\n\nå®ç”¨ç®—æ³•å’Œæ•°æ®ç»“æ„ã€‚\n\n```go\nimport \"github.com/karosown/katool-go/algorithm\"\n\n// æœ‰åºæ•°ç»„åˆå¹¶\nmerged := algorithm.MergeSortedArrays(arr1, arr2)\n\n// å“ˆå¸Œè®¡ç®—\nhash := algorithm.ComputeHash(data)\n```\n\n### ğŸ”¤ æ–‡æœ¬å¤„ç†\n\nä¸­æ–‡åˆ†è¯å’Œæ–‡æœ¬åˆ†æã€‚\n\n```go\nimport \"github.com/karosown/katool-go/words\"\n\n// ä¸­æ–‡åˆ†è¯\nsegmenter := words.NewJiebaSegmenter()\ntokens := segmenter.Cut(\"è¿™æ˜¯ä¸€ä¸ªä¸­æ–‡åˆ†è¯æµ‹è¯•\", true)\n\n// è¯é¢‘ç»Ÿè®¡\ncounter := words.NewWordCounter()\nfrequencies := counter.Count(tokens)\n```\n\n### ğŸ§° è¾…åŠ©å·¥å…·\n\nå®ç”¨çš„å¼€å‘è¾…åŠ©å·¥å…·ã€‚\n\n```go\nimport \"github.com/karosown/katool-go/util\"\n\n// æ—¥æœŸå¤„ç†\ndate := util.ParseDate(\"2023-12-25\")\nformatted := util.FormatDate(date, \"YYYY-MM-DD\")\n\n// éšæœºæ•°ç”Ÿæˆ\nrandomStr := util.RandomString(10)\nrandomInt := util.RandomInt(1, 100)\n```\n\n### âš¡ è§„åˆ™å¼•æ“\n\nçµæ´»å¼ºå¤§çš„ä¸šåŠ¡è§„åˆ™å¤„ç†å¼•æ“ï¼Œæ”¯æŒè§„åˆ™é“¾ã€è§„åˆ™æ ‘å’Œä¸­é—´ä»¶æœºåˆ¶ã€‚æ”¯æŒæ³›å‹ã€å¹¶å‘å®‰å…¨ï¼Œæä¾›EOFå’ŒFALLTHROUGHæµç¨‹æ§åˆ¶ã€‚\n\n#### ğŸš€ å¿«é€Ÿå¼€å§‹\n\n```go\nimport \"github.com/karosown/katool-go/ruleengine\"\n\n// 1. åˆ›å»ºè§„åˆ™å¼•æ“\nengine := ruleengine.NewRuleEngine[User]()\n\n// 2. æ³¨å†Œè§„åˆ™\nengine.RegisterRule(\"validate_age\",\n    func(user User, _ any) bool { return user.Age > 0 },  // éªŒè¯å‡½æ•°\n    func(user User, _ any) (User, any, error) {           // æ‰§è¡Œå‡½æ•°\n        if user.Age < 18 {\n            return user, \"æœªæˆå¹´ç”¨æˆ·\", nil\n        }\n        return user, \"æˆå¹´ç”¨æˆ·\", nil\n    },\n)\n\n// 3. æ„å»ºè§„åˆ™é“¾\nengine.NewBuilder(\"user_processing\").\n    AddRule(\"validate_age\").\n    Build()\n\n// 4. æ‰§è¡Œè§„åˆ™\nuser := User{Name: \"å¼ ä¸‰\", Age: 25}\nresult := engine.Execute(\"user_processing\", user)\nfmt.Printf(\"å¤„ç†ç»“æœ: %v\\n\", result.Result)\n```\n\n#### ğŸ› ï¸ é«˜çº§åŠŸèƒ½\n\n##### ä¸­é—´ä»¶æ”¯æŒ\n\n```go\n// æ·»åŠ æ—¥å¿—ä¸­é—´ä»¶\nengine.AddMiddleware(func(data User, next func(User) (User, any, error)) (User, any, error) {\n    fmt.Printf(\"æ‰§è¡Œå‰: %+v\\n\", data)\n    result, info, err := next(data)\n    fmt.Printf(\"æ‰§è¡Œå: %+v\\n\", result)\n    return result, info, err\n})\n\n// æ·»åŠ æ€§èƒ½ç›‘æ§ä¸­é—´ä»¶\nengine.AddMiddleware(func(data User, next func(User) (User, any, error)) (User, any, error) {\n    start := time.Now()\n    result, info, err := next(data)\n    fmt.Printf(\"æ‰§è¡Œè€—æ—¶: %v\\n\", time.Since(start))\n    return result, info, err\n})\n```\n\n##### é”™è¯¯æ§åˆ¶æœºåˆ¶\n\n**EOF - ç«‹å³ç»ˆæ­¢æ‰§è¡Œ**\n```go\n// å½“é‡åˆ°ä¸¥é‡é—®é¢˜æ—¶ï¼Œç«‹å³ç»ˆæ­¢æ•´ä¸ªè§„åˆ™é“¾\nreturn user, \"ç”¨æˆ·è¢«ç¦ç”¨\", ruleengine.EOF\n```\n\n**FALLTHROUGH - è·³è¿‡å½“å‰è§„åˆ™ç»§ç»­æ‰§è¡Œ**\n```go\n// è·³è¿‡å½“å‰è§„åˆ™ï¼Œä½†ç»§ç»­æ‰§è¡Œåç»­è§„åˆ™\nreturn user, \"è·³è¿‡æ­¤æ­¥éª¤\", ruleengine.FALLTHROUGH\n```\n\n#### ğŸŒ³ è§„åˆ™æ ‘ç»“æ„\n\né™¤äº†çº¿æ€§çš„è§„åˆ™é“¾ï¼Œè¿˜æ”¯æŒæ ‘å½¢ç»“æ„çš„è§„åˆ™ç»„ç»‡ï¼š\n\n##### åŸºç¡€ç”¨æ³•\n\n```go\ntype TestData struct {\n    Value int\n}\n\n// åˆ›å»ºè§„åˆ™èŠ‚ç‚¹\nleafNode := ruleengine.NewRuleNode[TestData](\n    func(data TestData, _ any) bool { return data.Value > 5 },\n    func(data TestData, _ any) (TestData, any, error) {\n        return TestData{Value: data.Value + 10}, \"å¤„ç†å®Œæˆ\", nil\n    },\n)\n\n// åˆ›å»ºè§„åˆ™æ ‘\ntree := ruleengine.NewRuleTree[TestData](leafNode)\n\n// æ‰§è¡Œè§„åˆ™æ ‘\nresult, info, err := tree.Run(TestData{Value: 3})\n```\n\n##### å¤æ‚æ ‘å½¢ç»“æ„\n\n```go\n// æ„å»ºå¤æ‚çš„è§„åˆ™æ ‘\nrootNode := ruleengine.NewRuleNode[User](\n    func(user User, _ any) bool { return user.ID > 0 },\n    func(user User, _ any) (User, any, error) {\n        return user, \"ç”¨æˆ·IDéªŒè¯é€šè¿‡\", nil\n    },\n)\n\n// æ·»åŠ å­èŠ‚ç‚¹\nageNode := ruleengine.NewRuleNode[User](\n    func(user User, _ any) bool { return user.Age > 0 },\n    func(user User, _ any) (User, any, error) {\n        return user, \"å¹´é¾„éªŒè¯é€šè¿‡\", nil\n    },\n)\n\nemailNode := ruleengine.NewRuleNode[User](\n    func(user User, _ any) bool { return user.Email != \"\" },\n    func(user User, _ any) (User, any, error) {\n        return user, \"é‚®ç®±éªŒè¯é€šè¿‡\", nil\n    },\n)\n\n// æ„å»ºæ ‘å½¢ç»“æ„\nrootNode.AddChild(ageNode)\nrootNode.AddChild(emailNode)\n\ntree := ruleengine.NewRuleTree[User](rootNode)\n```\n\n#### ğŸ“ å¤æ‚ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹\n\n##### ç”¨æˆ·æ³¨å†ŒéªŒè¯æµç¨‹\n\n```go\nfunc setupUserRegistrationEngine() *ruleengine.RuleEngine[User] {\n    engine := ruleengine.NewRuleEngine[User]()\n    \n    // åŸºç¡€ä¿¡æ¯éªŒè¯\n    engine.RegisterRule(\"validate_basic_info\",\n        func(user User, _ any) bool { return true },\n        func(user User, _ any) (User, any, error) {\n            if user.Name == \"\" {\n                return user, \"ç”¨æˆ·åä¸èƒ½ä¸ºç©º\", ruleengine.EOF\n            }\n            if len(user.Name) < 2 {\n                return user, \"ç”¨æˆ·åå¤ªçŸ­\", ruleengine.EOF\n            }\n            return user, \"åŸºç¡€ä¿¡æ¯éªŒè¯é€šè¿‡\", nil\n        },\n    )\n    \n    // å¹´é¾„æ£€æŸ¥\n    engine.RegisterRule(\"check_age\",\n        func(user User, _ any) bool { return true },\n        func(user User, _ any) (User, any, error) {\n            if user.Age < 13 {\n                return user, \"ç”¨æˆ·å¹´é¾„è¿‡å°\", ruleengine.EOF\n            } else if user.Age < 18 {\n                return user, \"æœªæˆå¹´ç”¨æˆ·\", ruleengine.FALLTHROUGH\n            }\n            return user, \"æˆå¹´ç”¨æˆ·\", nil\n        },\n    )\n    \n    // æˆå¹´ç”¨æˆ·èº«ä»½éªŒè¯ï¼ˆæœªæˆå¹´ç”¨æˆ·ä¼šè·³è¿‡ï¼‰\n    engine.RegisterRule(\"adult_identity_check\",\n        func(user User, _ any) bool { return user.Age >= 18 },\n        func(user User, _ any) (User, any, error) {\n            if user.IDCard == \"\" {\n                return user, \"æˆå¹´ç”¨æˆ·éœ€è¦èº«ä»½è¯\", ruleengine.EOF\n            }\n            return user, \"èº«ä»½éªŒè¯å®Œæˆ\", nil\n        },\n    )\n    \n    // é‚®ç®±éªŒè¯\n    engine.RegisterRule(\"validate_email\",\n        func(user User, _ any) bool { return user.Email != \"\" },\n        func(user User, _ any) (User, any, error) {\n            if !isValidEmail(user.Email) {\n                return user, \"é‚®ç®±æ ¼å¼é”™è¯¯\", ruleengine.EOF\n            }\n            return user, \"é‚®ç®±éªŒè¯é€šè¿‡\", nil\n        },\n    )\n    \n    // æœ€ç»ˆæ³¨å†Œ\n    engine.RegisterRule(\"complete_registration\",\n        func(user User, _ any) bool { return true },\n        func(user User, _ any) (User, any, error) {\n            user.ID = generateUserID()\n            user.CreatedAt = time.Now()\n            return user, \"æ³¨å†Œå®Œæˆ\", nil\n        },\n    )\n    \n    // æ„å»ºæ³¨å†Œæµç¨‹é“¾\n    engine.NewBuilder(\"user_registration\").\n        AddRule(\"validate_basic_info\").\n        AddRule(\"check_age\").\n        AddRule(\"adult_identity_check\").\n        AddRule(\"validate_email\").\n        AddRule(\"complete_registration\").\n        Build()\n    \n    return engine\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nfunc registerUser(userData User) {\n    engine := setupUserRegistrationEngine()\n    \n    result := engine.Execute(\"user_registration\", userData)\n    if result.Error != nil {\n        fmt.Printf(\"æ³¨å†Œå¤±è´¥: %v\\n\", result.Error)\n        return\n    }\n    \n    fmt.Printf(\"æ³¨å†ŒæˆåŠŸ: %+v\\n\", result.Data)\n    fmt.Printf(\"å¤„ç†ä¿¡æ¯: %v\\n\", result.Result)\n}\n```\n\n##### å¤æ‚æ‰§è¡Œåœºæ™¯åˆ†æ\n\n```go\n// æ‰§è¡Œç»“æœåˆ†æï¼š\nç”¨æˆ·å¹´é¾„ 12: validate_basic_info(âœ…) â†’ check_age(EOF ğŸ›‘) â†’ åç»­è§„åˆ™å…¨éƒ¨è·³è¿‡\nç”¨æˆ·å¹´é¾„ 16: validate_basic_info(âœ…) â†’ check_age(FALLTHROUGH âš¡) â†’ adult_identity_check(è·³è¿‡) â†’ validate_email(âœ…) â†’ complete_registration(âœ…)\nç”¨æˆ·å¹´é¾„ 25: validate_basic_info(âœ…) â†’ check_age(âœ…) â†’ adult_identity_check(âœ…) â†’ validate_email(âœ…) â†’ complete_registration(âœ…)\n```\n\n#### ğŸ”„ æ‰¹é‡æ‰§è¡Œ\n\n```go\n// æ‰¹é‡æ‰§è¡Œå¤šä¸ªè§„åˆ™é“¾\nusers := []User{\n    {Name: \"å¼ ä¸‰\", Age: 25, Email: \"zhang@example.com\"},\n    {Name: \"æå››\", Age: 17, Email: \"li@example.com\"},\n    {Name: \"ç‹äº”\", Age: 30, Email: \"wang@example.com\"},\n}\n\nchains := []string{\"user_registration\", \"user_validation\"}\n\nfor _, user := range users {\n    results := engine.BatchExecute(chains, user)\n    for i, result := range results {\n        fmt.Printf(\"ç”¨æˆ· %s æ‰§è¡Œé“¾ %s: \", user.Name, chains[i])\n        if result.Error != nil {\n            fmt.Printf(\"å¤±è´¥ - %v\\n\", result.Error)\n        } else {\n            fmt.Printf(\"æˆåŠŸ - %v\\n\", result.Result)\n        }\n    }\n}\n```\n\n#### ğŸ“š API å‚è€ƒ\n\n##### æ ¸å¿ƒå¼•æ“æ–¹æ³•\n\n**åˆ›å»ºä¸é…ç½®ï¼š**\n- `NewRuleEngine[T]()` - åˆ›å»ºæ–°çš„è§„åˆ™å¼•æ“\n- `RegisterRule(name, validFunc, execFunc)` - æ³¨å†Œè§„åˆ™\n- `AddMiddleware(middleware)` - æ·»åŠ ä¸­é—´ä»¶\n\n**è§„åˆ™é“¾æ„å»ºï¼š**\n- `NewBuilder(chainName)` - åˆ›å»ºè§„åˆ™é“¾æ„å»ºå™¨\n- `AddRule(ruleName)` - æ·»åŠ å·²æ³¨å†Œçš„è§„åˆ™\n- `AddCustomRule(validFunc, execFunc)` - æ·»åŠ ä¸´æ—¶è§„åˆ™\n- `Build()` - æ„å»ºè§„åˆ™é“¾\n\n**æ‰§è¡Œæ–¹æ³•ï¼š**\n- `Execute(chainName, data)` - æ‰§è¡ŒæŒ‡å®šè§„åˆ™é“¾\n- `BatchExecute(chainNames, data)` - æ‰¹é‡æ‰§è¡Œå¤šä¸ªè§„åˆ™é“¾\n\n##### è§„åˆ™æ ‘æ–¹æ³•\n\n**æ ‘ç»“æ„æ„å»ºï¼š**\n- `NewRuleNode[T](validFunc, execFunc)` - åˆ›å»ºè§„åˆ™èŠ‚ç‚¹\n- `AddChild(childNode)` - æ·»åŠ å­èŠ‚ç‚¹\n- `AddChildren(childNodes...)` - æ·»åŠ å¤šä¸ªå­èŠ‚ç‚¹\n\n**æ ‘æ‰§è¡Œï¼š**\n- `NewRuleTree[T](rootNode)` - åˆ›å»ºè§„åˆ™æ ‘\n- `Run(data)` - æ‰§è¡Œè§„åˆ™æ ‘\n- `ToQueue()` - è½¬æ¢ä¸ºé˜Ÿåˆ—å½¢å¼\n\n##### é”™è¯¯æ§åˆ¶å¸¸é‡\n\n- `ruleengine.EOF` - ç«‹å³ç»ˆæ­¢æ‰§è¡Œ\n- `ruleengine.FALLTHROUGH` - è·³è¿‡å½“å‰è§„åˆ™ç»§ç»­æ‰§è¡Œ\n\n##### æ‰§è¡Œç»“æœç»“æ„\n\n```go\ntype ExecuteResult[T any] struct {\n    Data   T           // å¤„ç†åçš„æ•°æ®\n    Result any         // æ‰§è¡Œç»“æœä¿¡æ¯\n    Error  error       // é”™è¯¯ä¿¡æ¯\n}\n```\n\n#### âš ï¸ æ³¨æ„äº‹é¡¹\n\n1. **ç³»ç»Ÿè¦æ±‚**: éœ€è¦ Go 1.18+ (æ³›å‹æ”¯æŒ)\n2. **çº¿ç¨‹å®‰å…¨**: å¼•æ“å®ä¾‹æ”¯æŒå¹¶å‘è®¿é—®\n3. **è§„åˆ™å‘½å**: å»ºè®®ä½¿ç”¨ `åŠ¨è¯_åè¯` æ ¼å¼ï¼Œå¦‚ `validate_email`\n4. **é”™è¯¯æ§åˆ¶**: \n   - ä½¿ç”¨ `EOF` å¤„ç†ä¸¥é‡é”™è¯¯ï¼Œç«‹å³ç»ˆæ­¢\n   - ä½¿ç”¨ `FALLTHROUGH` è·³è¿‡å¯é€‰é€»è¾‘\n5. **æ€§èƒ½ä¼˜åŒ–**: \n   - åˆç†è®¾è®¡è§„åˆ™ç²’åº¦ï¼Œé¿å…å•ä¸ªè§„åˆ™è¿‡äºå¤æ‚\n   - å–„ç”¨ä¸­é—´ä»¶å¤„ç†æ¨ªåˆ‡å…³æ³¨ç‚¹\n   - è§„åˆ™é“¾é¡ºåºå½±å“æ€§èƒ½ï¼Œå°†é«˜é¢‘å¤±è´¥çš„è§„åˆ™å‰ç½®\n\n#### ğŸ¯ æœ€ä½³å®è·µ\n\n1. **å•ä¸€èŒè´£**: æ¯ä¸ªè§„åˆ™åªå¤„ç†ä¸€ç§ä¸šåŠ¡é€»è¾‘\n2. **åˆç†åˆ†å±‚**: åŸºç¡€éªŒè¯ â†’ ä¸šåŠ¡é€»è¾‘ â†’ æ•°æ®å¤„ç† â†’ æœ€ç»ˆç¡®è®¤\n3. **é”™è¯¯å¤„ç†**: åŒºåˆ†ä¸šåŠ¡é”™è¯¯ï¼ˆFALLTHROUGHï¼‰å’Œç³»ç»Ÿé”™è¯¯ï¼ˆEOFï¼‰\n4. **ä¸­é—´ä»¶ä½¿ç”¨**: ç”¨äºæ—¥å¿—ã€ç›‘æ§ã€ç¼“å­˜ç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹\n5. **æµ‹è¯•è¦†ç›–**: ä¸ºæ¯ä¸ªè§„åˆ™å’Œè§„åˆ™é“¾ç¼–å†™å•å…ƒæµ‹è¯•\n\n```go\n// è§„åˆ™æµ‹è¯•ç¤ºä¾‹\nfunc TestValidateAgeRule(t *testing.T) {\n    engine := ruleengine.NewRuleEngine[User]()\n    \n    engine.RegisterRule(\"validate_age\",\n        func(user User, _ any) bool { return user.Age > 0 },\n        func(user User, _ any) (User, any, error) {\n            if user.Age < 18 {\n                return user, \"æœªæˆå¹´\", ruleengine.FALLTHROUGH\n            }\n            return user, \"æˆå¹´\", nil\n        },\n    )\n    \n    engine.NewBuilder(\"test_chain\").AddRule(\"validate_age\").Build()\n    \n    // æµ‹è¯•æœªæˆå¹´ç”¨æˆ·\n    minorResult := engine.Execute(\"test_chain\", User{Age: 16})\n    assert.Equal(t, ruleengine.FALLTHROUGH, minorResult.Error)\n    assert.Equal(t, \"æœªæˆå¹´\", minorResult.Result)\n    \n    // æµ‹è¯•æˆå¹´ç”¨æˆ·\n    adultResult := engine.Execute(\"test_chain\", User{Age: 25})\n    assert.Nil(t, adultResult.Error)\n    assert.Equal(t, \"æˆå¹´\", adultResult.Result)\n}\n```\n\n#### ğŸ“Š å¯è§†åŒ–æµç¨‹å›¾\n\n##### EOF æœºåˆ¶ - ç«‹å³ç»ˆæ­¢æ‰§è¡Œ\n\n```\næ­£å¸¸æ‰§è¡Œæµç¨‹ï¼š\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   è§„åˆ™ A    â”‚â”€â”€â”€â–¶â”‚   è§„åˆ™ B    â”‚â”€â”€â”€â–¶â”‚   è§„åˆ™ C    â”‚â”€â”€â”€â–¶â”‚   è§„åˆ™ D    â”‚\nâ”‚  (éªŒè¯é€šè¿‡)  â”‚    â”‚  (éªŒè¯é€šè¿‡)  â”‚    â”‚  (éªŒè¯é€šè¿‡)  â”‚    â”‚  (éªŒè¯é€šè¿‡)  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       âœ…               âœ…               âœ…               âœ…\n\nEOF ç»ˆæ­¢æµç¨‹ï¼š\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   è§„åˆ™ A    â”‚â”€â”€â”€â–¶â”‚   è§„åˆ™ B    â”‚ â•³  â”‚   è§„åˆ™ C    â”‚    â”‚   è§„åˆ™ D    â”‚\nâ”‚  (éªŒè¯é€šè¿‡)  â”‚    â”‚ (è¿”å› EOF)  â”‚    â”‚  (æœªæ‰§è¡Œ)   â”‚    â”‚  (æœªæ‰§è¡Œ)   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       âœ…               ğŸ›‘               â­•               â­•\n                   ç«‹å³ç»ˆæ­¢ï¼Œåç»­è§„åˆ™ä¸æ‰§è¡Œ\n\nè§„åˆ™æ ‘ä¸­çš„ EOFï¼š\n                    æ ¹èŠ‚ç‚¹\n                       â”‚\n                   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”\n                   â”‚ è§„åˆ™A â”‚ âœ…\n                   â””â”€â”€â”€â”¬â”€â”€â”€â”˜\n                       â”‚\n            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n            â–¼          â–¼          â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”\n        â”‚è§„åˆ™B1â”‚   â”‚è§„åˆ™B2â”‚   â”‚è§„åˆ™B3â”‚\n        â”‚ (EOF)â”‚   â”‚(æœªæ‰§è¡Œ)â”‚ â”‚(æœªæ‰§è¡Œ)â”‚\n        â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜\n            ğŸ›‘         â­•         â­•\n        \n        å½“B1è¿”å›EOFæ—¶ï¼Œæ•´ä¸ªæ ‘ç«‹å³ç»ˆæ­¢\n        B2ã€B3 ä»¥åŠæ‰€æœ‰åç»­èŠ‚ç‚¹éƒ½ä¸ä¼šæ‰§è¡Œ\n```\n\n##### FALLTHROUGH æœºåˆ¶ - è·³è¿‡ç»§ç»­æ‰§è¡Œ\n\n```\næ­£å¸¸æ‰§è¡Œæµç¨‹ï¼š\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   è§„åˆ™ A    â”‚â”€â”€â”€â–¶â”‚   è§„åˆ™ B    â”‚â”€â”€â”€â–¶â”‚   è§„åˆ™ C    â”‚â”€â”€â”€â–¶â”‚   è§„åˆ™ D    â”‚\nâ”‚  (éªŒè¯é€šè¿‡)  â”‚    â”‚  (éªŒè¯é€šè¿‡)  â”‚    â”‚  (éªŒè¯é€šè¿‡)  â”‚    â”‚  (éªŒè¯é€šè¿‡)  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       âœ…               âœ…               âœ…               âœ…\n\nFALLTHROUGH è·³è¿‡æµç¨‹ï¼š\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   è§„åˆ™ A    â”‚â”€â”€â”€â–¶â”‚   è§„åˆ™ B    â”‚~~~â–¶â”‚   è§„åˆ™ C    â”‚â”€â”€â”€â–¶â”‚   è§„åˆ™ D    â”‚\nâ”‚  (éªŒè¯é€šè¿‡)  â”‚    â”‚(FALLTHROUGH)â”‚    â”‚  (éªŒè¯é€šè¿‡)  â”‚    â”‚  (éªŒè¯é€šè¿‡)  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       âœ…               âš¡               âœ…               âœ…\n                   è·³è¿‡ä½†ç»§ç»­æ‰§è¡Œåç»­è§„åˆ™\n\nè§„åˆ™æ ‘ä¸­çš„ FALLTHROUGHï¼š\n                      æ ¹èŠ‚ç‚¹\n                         â”‚\n                     â”Œâ”€â”€â”€â–¼â”€â”€â”€â”\n                     â”‚ è§„åˆ™A â”‚ âœ…\n                     â””â”€â”€â”€â”¬â”€â”€â”€â”˜\n                         â”‚\n              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n              â–¼          â–¼          â–¼\n          â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”\n          â”‚è§„åˆ™B1â”‚   â”‚è§„åˆ™B2â”‚   â”‚è§„åˆ™B3â”‚\n          â”‚(FALL)â”‚   â”‚ âœ…   â”‚   â”‚ âœ…   â”‚\n          â””â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”¬â”€â”€â”€â”˜\n             â”‚âš¡       â”‚        â”‚\n             â–¼          â–¼          â–¼\n          â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”\n          â”‚è§„åˆ™C1â”‚   â”‚è§„åˆ™C2â”‚   â”‚è§„åˆ™C3â”‚\n          â”‚(è·³è¿‡) â”‚   â”‚ âœ…   â”‚   â”‚ âœ…   â”‚\n          â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜\n             â­•\n        \n        å½“B1è¿”å›FALLTHROUGHæ—¶ï¼š\n        - B1çš„å­èŠ‚ç‚¹C1è¢«è·³è¿‡\n        - B2ã€B3 ç»§ç»­æ­£å¸¸æ‰§è¡Œ\n        - C2ã€C3 ç»§ç»­æ­£å¸¸æ‰§è¡Œ\n```\n\n<hr>\n\n## ğŸ’¡ æœ€ä½³å®è·µ\n\n### ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®\n\n<details>\n<summary><b>ğŸŒŠ æµå¼å¤„ç†æ€§èƒ½ä¼˜åŒ–</b></summary>\n\n- **åˆç†ä½¿ç”¨å¹¶è¡Œæµ**ï¼šå¤§æ•°æ®é›†(>1000å…ƒç´ )æ—¶å¯ç”¨`Parallel()`\n- **é¿å…é¢‘ç¹è£…ç®±**ï¼šä½¿ç”¨å…·ä½“ç±»å‹è€Œéinterface{}\n- **é“¾å¼æ“ä½œæ’åº**ï¼šå…ˆFilterå†Mapï¼Œå‡å°‘å¤„ç†å…ƒç´ æ•°é‡\n\n```go\n// âœ… æ¨èï¼šå…ˆè¿‡æ»¤å†å¤„ç†\nstream.ToStream(&data).\n    Filter(func(item Item) bool { return item.IsValid() }).  // å…ˆå‡å°‘æ•°æ®é‡\n    Map(func(item Item) ProcessedItem { return item.Process() }).\n\tToList()\n\n// âŒ é¿å…ï¼šå…ˆå¤„ç†å†è¿‡æ»¤\nstream.ToStream(&data).\n    Map(func(item Item) ProcessedItem { return item.Process() }).  // å¤„ç†æ‰€æœ‰æ•°æ®\n    Filter(func(item ProcessedItem) bool { return item.IsValid() }). // å†è¿‡æ»¤\n\tToList()\n```\n</details>\n\n<details>\n<summary><b>ğŸ“š Optional å®¹å™¨æœ€ä½³å®è·µ</b></summary>\n\n- **é¿å…åµŒå¥—Optional**ï¼šä¸è¦åˆ›å»º`Optional[Optional[T]]`\n- **ä½¿ç”¨ç±»å‹å®‰å…¨çš„MapTyped**ï¼šé¿å…ç±»å‹æ–­è¨€é”™è¯¯\n- **åˆç†ä½¿ç”¨OrElsePanic**ï¼šä»…åœ¨ç¡®å®šä¸ä¼šä¸ºç©ºæ—¶ä½¿ç”¨\n\n```go\n// âœ… æ¨èï¼šä½¿ç”¨MapTypedè¿›è¡Œç±»å‹å®‰å…¨è½¬æ¢\nresult := optional.MapTyped(optional.Of(\"  hello  \"), strings.TrimSpace).\n    Filter(func(s string) bool { return len(s) > 0 }).\n    OrElse(\"é»˜è®¤å€¼\")\n\n// âŒ é¿å…ï¼šä½¿ç”¨Mapéœ€è¦ç±»å‹æ–­è¨€\nresult := optional.Of(\"  hello  \").\n    Map(func(s any) any { return strings.TrimSpace(s.(string)) }). // éœ€è¦æ–­è¨€\n    OrElse(\"é»˜è®¤å€¼\")\n```\n</details>\n\n<details>\n<summary><b>âš¡ è§„åˆ™å¼•æ“æœ€ä½³å®è·µ</b></summary>\n\n- **è§„åˆ™ç²’åº¦æ§åˆ¶**ï¼šå•ä¸ªè§„åˆ™åªå¤„ç†ä¸€ç§ä¸šåŠ¡é€»è¾‘\n- **åˆç†ä½¿ç”¨ä¸­é—´ä»¶**ï¼šç”¨äºæ—¥å¿—ã€ç›‘æ§ï¼Œé¿å…ä¸šåŠ¡é€»è¾‘\n- **é”™è¯¯æ§åˆ¶ç­–ç•¥**ï¼šEOFç”¨äºä¸¥é‡é”™è¯¯ï¼ŒFALLTHROUGHç”¨äºè·³è¿‡é€»è¾‘\n\n```go\n// âœ… æ¨èï¼šå•ä¸€èŒè´£çš„è§„åˆ™\nengine.RegisterRule(\"validate_email\",\n    func(user User, _ any) bool { return user.Email != \"\" },\n    func(user User, _ any) (User, any, error) {\n        if !isValidEmail(user.Email) {\n            return user, \"é‚®ç®±æ ¼å¼é”™è¯¯\", ruleengine.EOF\n        }\n        return user, \"é‚®ç®±éªŒè¯é€šè¿‡\", nil\n    },\n)\n\n// âŒ é¿å…ï¼šå¤æ‚çš„å¤šèŒè´£è§„åˆ™\nengine.RegisterRule(\"validate_user\",  // å¤ªå®½æ³›\n    func(user User, _ any) bool { return true },\n    func(user User, _ any) (User, any, error) {\n        // éªŒè¯é‚®ç®±ã€æ‰‹æœºã€èº«ä»½è¯ç­‰å¤šç§é€»è¾‘æ··åˆ\n        // è¿åå•ä¸€èŒè´£åŸåˆ™\n    },\n)\n```\n</details>\n\n<details>\n<summary><b>ğŸŒ ç½‘ç»œè¯·æ±‚æœ€ä½³å®è·µ</b></summary>\n\n- **è®¾ç½®åˆç†çš„è¶…æ—¶**ï¼šé¿å…è¯·æ±‚hangä½\n- **ä½¿ç”¨é“¾å¼æ„å»º**ï¼šæé«˜ä»£ç å¯è¯»æ€§\n- **æ­£ç¡®å¤„ç†é”™è¯¯**ï¼šæ£€æŸ¥å“åº”çŠ¶æ€å’Œé”™è¯¯\n\n```go\n// âœ… æ¨èå†™æ³•ï¼šå®Œæ•´çš„é”™è¯¯å¤„ç†\nclient := remote.NewRemoteRequest(\"https://api.example.com\").\n    HttpClient(resty.New().SetTimeout(30*time.Second))\n\nvar result ApiResponse\nresp, err := client.\n    Headers(map[string]string{\"Authorization\": \"Bearer \" + token}).\n    QueryParam(map[string]string{\"page\": \"1\"}).\n    Method(\"GET\").\n    Url(\"/api/data\").\n    Build(&result)\n\nif err != nil {\n    log.Printf(\"è¯·æ±‚å¤±è´¥: %v\", err)\n    return\n}\n\n// æ£€æŸ¥ä¸šåŠ¡é€»è¾‘é”™è¯¯\nif result.Code != 0 {\n    log.Printf(\"ä¸šåŠ¡é”™è¯¯: %s\", result.Message)\n    return\n}\n```\n</details>\n\n<hr>\n\n## ğŸ‘¥ è´¡çŒ®æŒ‡å—\n\næˆ‘ä»¬çƒ­çƒˆæ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼æ— è®ºæ˜¯æŠ¥å‘Šé—®é¢˜ã€æå‡ºå»ºè®®ï¼Œè¿˜æ˜¯æäº¤ä»£ç ï¼Œéƒ½å¯¹é¡¹ç›®çš„å‘å±•å¾ˆæœ‰å¸®åŠ©ã€‚\n\n### ğŸš€ å¦‚ä½•å‚ä¸\n\n<table>\n  <tr>\n    <td><b>ğŸ› æŠ¥å‘Šé—®é¢˜</b></td>\n    <td>å‘ç°Bugæˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Ÿè¯·åœ¨ <a href=\"https://github.com/karosown/katool-go/issues\">Issues</a> ä¸­æäº¤</td>\n  </tr>\n  <tr>\n    <td><b>âœ¨ è´¡çŒ®ä»£ç </b></td>\n    <td>æäº¤æ–°åŠŸèƒ½æˆ–ä¿®å¤ï¼Œéµå¾ªä¸‹é¢çš„å¼€å‘æµç¨‹</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ“š å®Œå–„æ–‡æ¡£</b></td>\n    <td>æ”¹è¿›æ–‡æ¡£ã€æ·»åŠ ç¤ºä¾‹æˆ–ç¿»è¯‘</td>\n  </tr>\n  <tr>\n    <td><b>ğŸ”§ æ€§èƒ½ä¼˜åŒ–</b></td>\n    <td>æå‡ä»£ç æ€§èƒ½å’Œè´¨é‡</td>\n  </tr>\n</table>\n\n### ğŸ“ å¼€å‘æµç¨‹\n\n1. **Fork æœ¬ä»“åº“**\n   ```bash\n   git clone https://github.com/your-username/katool-go.git\n   cd katool-go\n   ```\n\n2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**\n   ```bash\n   git checkout -b feature/amazing-feature\n   # æˆ–\n   git checkout -b fix/bug-description\n   ```\n\n3. **å¼€å‘å’Œæµ‹è¯•**\n   ```bash\n   # è¿è¡Œæµ‹è¯•ç¡®ä¿ä¸ç ´åç°æœ‰åŠŸèƒ½\n   go test ./...\n   \n   # è¿è¡Œæ€§èƒ½æµ‹è¯•\n   go test -bench=. ./...\n   \n   # æ£€æŸ¥ä»£ç æ ¼å¼\n   go fmt ./...\n   go vet ./...\n   ```\n\n4. **æäº¤æ›´æ”¹**\n   ```bash\n   git add .\n   git commit -m \"feat: æ·»åŠ æ–°çš„æµå¼å¤„ç†åŠŸèƒ½\"\n   # æˆ–\n   git commit -m \"fix: ä¿®å¤å¹¶å‘è®¿é—®é—®é¢˜\"\n   ```\n\n5. **æ¨é€å’Œåˆ›å»ºPR**\n   ```bash\n   git push origin feature/amazing-feature\n   ```\n   ç„¶ååœ¨GitHubä¸Šåˆ›å»º Pull Request\n\n### âœ… ä»£ç è§„èŒƒ\n\nè¯·ç¡®ä¿æ‚¨çš„ä»£ç ç¬¦åˆä»¥ä¸‹è¦æ±‚ï¼š\n\n- **âœ… é€šè¿‡æ‰€æœ‰æµ‹è¯•**ï¼š`go test ./...` æ— é”™è¯¯\n- **ğŸ“ éµå¾ªGoè§„èŒƒ**ï¼šä½¿ç”¨ `go fmt`ã€`go vet` æ£€æŸ¥\n- **ğŸ“ æ·»åŠ æ–‡æ¡£**ï¼šå…¬å¼€å‡½æ•°å’Œç»“æ„ä½“éœ€è¦æœ‰æ³¨é‡Š\n- **ğŸ§ª åŒ…å«æµ‹è¯•**ï¼šæ–°åŠŸèƒ½éœ€è¦æœ‰å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹\n- **âš¡ æ€§èƒ½è€ƒè™‘**ï¼šé¿å…æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜\n\n### ğŸ“‹ æäº¤ä¿¡æ¯è§„èŒƒ\n\nä½¿ç”¨ä»¥ä¸‹æ ¼å¼çš„æäº¤ä¿¡æ¯ï¼š\n\n```\ntype(scope): ç®€çŸ­æè¿°\n\nè¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼‰\n\nCloses #issue_number\n```\n\n**ç±»å‹è¯´æ˜ï¼š**\n- `feat`: æ–°åŠŸèƒ½\n- `fix`: Bugä¿®å¤\n- `docs`: æ–‡æ¡£æ›´æ–°\n- `style`: ä»£ç æ ¼å¼è°ƒæ•´\n- `refactor`: ä»£ç é‡æ„\n- `perf`: æ€§èƒ½ä¼˜åŒ–\n- `test`: æµ‹è¯•ç›¸å…³\n- `chore`: æ„å»ºæˆ–å·¥å…·ç›¸å…³\n\n**ç¤ºä¾‹ï¼š**\n```\nfeat(stream): æ·»åŠ å¹¶è¡Œæµå¤„ç†æ”¯æŒ\n\n- æ–°å¢ Parallel() æ–¹æ³•å¯ç”¨å¹¶è¡Œå¤„ç†\n- ä¼˜åŒ–å¤§æ•°æ®é›†çš„å¤„ç†æ€§èƒ½\n- æ·»åŠ ç›¸å…³æµ‹è¯•ç”¨ä¾‹\n\nCloses #123\n```\n\n### ğŸ” ä»£ç å®¡æŸ¥\n\næˆ‘ä»¬ä¼šä»”ç»†å®¡æŸ¥æ¯ä¸ªPRï¼Œç¡®ä¿ï¼š\n\n- ä»£ç è´¨é‡å’Œæ€§èƒ½\n- æµ‹è¯•è¦†ç›–ç‡\n- æ–‡æ¡£å®Œæ•´æ€§\n- ä¸ç°æœ‰æ¶æ„çš„å…¼å®¹æ€§\n\n### ğŸ†˜ è·å–å¸®åŠ©\n\nå¦‚æœæ‚¨åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š\n\n- æŸ¥çœ‹ç°æœ‰çš„ [Issues](https://github.com/karosown/katool-go/issues)\n- é˜…è¯»é¡¹ç›®æ–‡æ¡£å’Œç¤ºä¾‹\n- åœ¨ Issue ä¸­æé—®æˆ–è®¨è®º\n\n<hr>\n\n## ğŸ“„ è®¸å¯è¯\n\nKatool-Go é‡‡ç”¨ **MIT è®¸å¯è¯**ã€‚è¯¦æƒ…è¯·å‚è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚\n\n### ğŸ“œ è®¸å¯è¯æ‘˜è¦\n\n- âœ… **å•†ä¸šä½¿ç”¨**ï¼šå¯ç”¨äºå•†ä¸šé¡¹ç›®\n- âœ… **ä¿®æ”¹**ï¼šå¯ä»¥ä¿®æ”¹æºä»£ç \n- âœ… **åˆ†å‘**ï¼šå¯ä»¥åˆ†å‘åŸç‰ˆæˆ–ä¿®æ”¹ç‰ˆ\n- âœ… **ç§ç”¨**ï¼šå¯ç”¨äºç§äººé¡¹ç›®\n- â— **è´£ä»»**ï¼šä½œè€…ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»\n- â— **ä¿è¯**ï¼šä¸æä¾›ä»»ä½•ä¿è¯\n\n### ğŸ¤ è‡´è°¢\n\næ„Ÿè°¢æ‰€æœ‰ä¸º Katool-Go åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼\n\nç‰¹åˆ«æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š\n- [Go å®˜æ–¹å›¢é˜Ÿ](https://golang.org/) - æä¾›ä¼˜ç§€çš„ç¼–ç¨‹è¯­è¨€\n- [resty](https://github.com/go-resty/resty) - HTTPå®¢æˆ·ç«¯åº“\n- [rod](https://github.com/go-rod/rod) - Chromeæ§åˆ¶åº“\n- [jieba](https://github.com/yanyiwu/gojieba) - ä¸­æ–‡åˆ†è¯åº“\n- [logrus](https://github.com/sirupsen/logrus) - æ—¥å¿—åº“\n\n---\n\n<div align=\"center\">\n  <sub>Built with â¤ï¸ by <a href=\"https://github.com/karosown\">Karosown Team</a></sub>\n  <br>\n  <sub>â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼</sub>\n</div>"
